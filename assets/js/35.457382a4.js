(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{289:function(a,s,t){"use strict";t.r(s);var n=t(0),e=Object(n.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("div",{staticClass:"tip custom-block"},[t("p",[a._v("日志相关配置说明")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### set log levels ###")]),a._v("\nlog4j.rootLogger "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" debug ,  stdout ,  D ,  E\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 输出到控制台 ###")]),a._v("\nlog4j.appender.stdout "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.Target "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" System.out\nlog4j.appender.stdout.layout "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("  %d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("ABSOLUTE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" %5p %c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" 1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(":%L - %m%n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 输出到日志文件 ###")]),a._v("\nlog4j.appender.D "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.D.File "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" logs/log.log\nlog4j.appender.D.Append "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\nlog4j.appender.D.Threshold "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" DEBUG "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 输出DEBUG级别以上的日志")]),a._v("\nlog4j.appender.D.layout "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" org.apache.log4j.PatternLayout\nlog4j.appender.D.layout.ConversionPattern "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" %-d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("yyyy-MM-dd HH:mm:ss"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" %t:%r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" - "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" %p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  %m%n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 保存异常信息到单独文件 ###")]),a._v("\nlog4j.appender.D "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.D.File "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" logs/error.log "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 异常日志文件名")]),a._v("\nlog4j.appender.D.Append "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\nlog4j.appender.D.Threshold "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" ERROR "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 只输出ERROR级别以上的日志!!!")]),a._v("\nlog4j.appender.D.layout "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" org.apache.log4j.PatternLayout\nlog4j.appender.D.layout.ConversionPattern "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" %-d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("yyyy-MM-dd HH:mm:ss"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" %t:%r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" - "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" %p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  %m%n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])]),t("h2",{attrs:{id:"参数意义说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数意义说明","aria-hidden":"true"}},[a._v("#")]),a._v(" 参数意义说明")]),a._v(" "),t("h3",{attrs:{id:"输出级别的种类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#输出级别的种类","aria-hidden":"true"}},[a._v("#")]),a._v(" 输出级别的种类")]),a._v(" "),t("p",[t("code",[a._v("ERROR、WARN、INFO、DEBUG")])]),a._v(" "),t("ol",[t("li",[a._v("ERROR 为严重错误 主要是程序的错误")]),a._v(" "),t("li",[a._v("WARN 为一般警告, 比如session丢失")]),a._v(" "),t("li",[a._v("INFO 为一般要显示的信息, 比如登录登出")]),a._v(" "),t("li",[a._v("DEBUG 为程序的调试信息")])]),a._v(" "),t("h3",{attrs:{id:"配置日志信息输出目的地"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置日志信息输出目的地","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置日志信息输出目的地")]),a._v(" "),t("p",[t("code",[a._v("log4j.appender.appenderName = fully.qualified.name.of.appender.class")])]),a._v(" "),t("ol",[t("li",[a._v("org.apache.log4j.ConsoleAppender（控制台）")]),a._v(" "),t("li",[a._v("org.apache.log4j.FileAppender（文件）")]),a._v(" "),t("li",[a._v("org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件）")]),a._v(" "),t("li",[a._v("org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）")]),a._v(" "),t("li",[a._v("org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）")])]),a._v(" "),t("h3",{attrs:{id:"配置日志信息的格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置日志信息的格式","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置日志信息的格式")]),a._v(" "),t("p",[t("code",[a._v("log4j.appender.appenderName.layout =fully.qualified.name.of.layout.class")])]),a._v(" "),t("ol",[t("li",[a._v("org.apache.log4j.HTMLLayout（以HTML表格形式布局）,")]),a._v(" "),t("li",[a._v("org.apache.log4j.PatternLayout（可以灵活地指定布局模式）,")]),a._v(" "),t("li",[a._v("org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）,")]),a._v(" "),t("li",[a._v("org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等等信息）")])]),a._v(" "),t("h3",{attrs:{id:"控制台选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#控制台选项","aria-hidden":"true"}},[a._v("#")]),a._v(" 控制台选项")]),a._v(" "),t("p",[a._v("Threshold=DEBUG: 指定日志消息的输出最低层次.\nImmediateFlush=true: 默认值是true,意谓着所有的消息都会被立即输出.\nTarget=System.err: 默认情况下是: System.out,指定输出控制台")]),a._v(" "),t("h4",{attrs:{id:"fileappender-选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fileappender-选项","aria-hidden":"true"}},[a._v("#")]),a._v(" FileAppender 选项")]),a._v(" "),t("p",[a._v("Threshold=DEBUF: 指定日志消息的输出最低层次.\nImmediateFlush=true: 默认值是true,意谓着所有的消息都会被立即输出.\nFile=mylog.txt: 指定消息输出到mylog.txt文件.\nAppend=false: 默认值是true,即将消息增加到指定文件中, false指将消息覆盖指定的文件内容.")]),a._v(" "),t("h4",{attrs:{id:"rollingfileappender-选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rollingfileappender-选项","aria-hidden":"true"}},[a._v("#")]),a._v(" RollingFileAppender 选项")]),a._v(" "),t("p",[a._v("Threshold=DEBUG: 指定日志消息的输出最低层次.\nImmediateFlush=true: 默认值是true,意谓着所有的消息都会被立即输出.\nFile=mylog.txt: 指定消息输出到mylog.txt文件.\nAppend=false: 默认值是true,即将消息增加到指定文件中, false指将消息覆盖指定的文件内容.\nMaxFileSize=100KB: 后缀可以是KB, MB 或者是 GB. 在日志文件到达该大小时, 将会自动滚动, 即将原来的内容移到mylog.log.1文件.\nMaxBackupIndex=2: 指定可以产生的滚动文件的最大数.")]),a._v(" "),t("p",[t("code",[a._v("log4j.appender.A1.layout.ConversionPattern=%-4r %-5p %d{yyyy-MM-dd HH:mm:ssS} %c %m%n")])]),a._v(" "),t("h3",{attrs:{id:"日志信息格式中几个符号所代表的含义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志信息格式中几个符号所代表的含义","aria-hidden":"true"}},[a._v("#")]),a._v(" 日志信息格式中几个符号所代表的含义:")]),a._v(" "),t("p",[a._v('-X号: X信息输出时左对齐；\n%p: 输出日志信息优先级, 即DEBUG, INFO, WARN, ERROR, FATAL,\n%d: 输出日志时间点的日期或时间, 默认格式为ISO8601, 也可以在其后指定格式, 比如: %d{yyy MMM dd HH:mm:ss,SSS}, 输出类似: 2002年10月18日 22: 10: 28, 921\n%r: 输出自应用启动到输出该log信息耗费的毫秒数\n%c: 输出日志信息所属的类目, 通常就是所在类的全名\n%t: 输出产生该日志事件的线程名\n%l: 输出日志事件的发生位置, 相当于%C.%M(%F:%L)的组合,包括类目名、发生的线程, 以及在代码中的行数. 举例: Testlog4.main (TestLog4.java:10)\n%x: 输出和当前线程相关联的NDC(嵌套诊断环境),尤其用到像java servlets这样的多客户多线程的应用中.\n%%: 输出一个"%"字符\n%F: 输出日志消息产生时所在的文件名称\n%L: 输出代码中的行号\n%m: 输出代码中指定的消息,产生的日志具体信息\n%n: 输出一个回车换行符, Windows平台为"/r/n", Unix平台为"/n"输出日志信息换行')]),a._v(" "),t("p",[a._v("可以在%与模式字符之间加上修饰符来控制其最小宽度、最大宽度、和文本的对齐方式. 如:")]),a._v(" "),t("ol",[t("li",[a._v("%20c: 指定输出category的名称, 最小的宽度是20, 如果category的名称小于20的话, 默认的情况下右对齐.")]),a._v(" "),t("li",[a._v('%-20c:指定输出category的名称, 最小的宽度是20, 如果category的名称小于20的话, "-"号指定左对齐.')]),a._v(" "),t("li",[a._v("%.30c:指定输出category的名称, 最大的宽度是30, 如果category的名称大于30的话, 就会将左边多出的字符截掉, 但小于30的话也不会有空格.")]),a._v(" "),t("li",[a._v("%20.30c:如果category的名称小于20就补空格, 并且右对齐, 如果其名称长于30字符, 就从左边较远输出的字符截掉.")])]),a._v(" "),t("h2",{attrs:{id:"文件配置-sample1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件配置-sample1","aria-hidden":"true"}},[a._v("#")]),a._v(" 文件配置 Sample1")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("log4j.rootLogger"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DEBUG,A1,R\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ConsoleAppender 输出")]),a._v("\nlog4j.appender.A1"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.ConsoleAppender\nlog4j.appender.A1.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout\nlog4j.appender.A1.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("%-d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("yyyy-MM-dd HH:mm:ss,SSS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("-"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%p"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %m%n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# File 输出 一天一个文件,输出路径可以定制,一般在根路径下")]),a._v("\nlog4j.appender.R"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.R.File"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("blog_log.txt\nlog4j.appender.R.MaxFileSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("500KB\nlog4j.appender.R.MaxBackupIndex"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("10\nlog4j.appender.R.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout\nlog4j.appender.R.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("%d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("yyyy-MM-dd HH:mm:ss,SSS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%p"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" - %m%n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("h2",{attrs:{id:"文件配置-sample2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件配置-sample2","aria-hidden":"true"}},[a._v("#")]),a._v(" 文件配置 Sample2")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("下面给出的Log4J配置文件实现了输出到控制台, 文件, 回滚文件, 发送日志邮件, 输出到数据库日志表, 自定义标签等全套功能. \nlog4j.rootLogger"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DEBUG,CONSOLE,A1,im \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#DEBUG,CONSOLE,FILE,ROLLING_FILE,MAIL,DATABASE")]),a._v("\nlog4j.addivity.org.apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("################### ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Console Appender ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("################### ")]),a._v("\nlog4j.appender.CONSOLE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.ConsoleAppender \nlog4j.appender.Threshold"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DEBUG \nlog4j.appender.CONSOLE.Target"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("System.out \nlog4j.appender.CONSOLE.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout \nlog4j.appender.CONSOLE.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %d - %c -%-4r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %-5p %c %x - %m%n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#log4j.appender.CONSOLE.layout.ConversionPattern=[start]%d{DATE}[DATE]%n%p[PRIORITY]%n%x[NDC]%n%t[THREAD] n%c[CATEGORY]%n%m[MESSAGE]%n%n")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##################### ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# File Appender ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##################### ")]),a._v("\nlog4j.appender.FILE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.FileAppender \nlog4j.appender.FILE.File"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("file.log \nlog4j.appender.FILE.Append"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false \nlog4j.appender.FILE.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout \nlog4j.appender.FILE.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %d - %c -%-4r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %-5p %c %x - %m%n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Use this layout for LogFactor 5 analysis")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################## ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Rolling File ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################## ")]),a._v("\nlog4j.appender.ROLLING_FILE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.RollingFileAppender \nlog4j.appender.ROLLING_FILE.Threshold"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ERROR \nlog4j.appender.ROLLING_FILE.File"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("rolling.log \nlog4j.appender.ROLLING_FILE.Append"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true \nlog4j.appender.ROLLING_FILE.MaxFileSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("10KB \nlog4j.appender.ROLLING_FILE.MaxBackupIndex"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1 \nlog4j.appender.ROLLING_FILE.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout \nlog4j.appender.ROLLING_FILE.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %d - %c -%-4r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %-5p %c %x - %m%n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#################### ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Socket Appender ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#################### ")]),a._v("\nlog4j.appender.SOCKET"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.RollingFileAppender \nlog4j.appender.SOCKET.RemoteHost"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("localhost \nlog4j.appender.SOCKET.Port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("5001 \nlog4j.appender.SOCKET.LocationInfo"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Set up for Log Facter 5 ")]),a._v("\nlog4j.appender.SOCKET.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout \nlog4j.appender.SOCET.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("%d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("DATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("DATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("%n%p"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PRIORITY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("%n%x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("NDC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("%n%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("THREAD"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("%n%c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("CATEGORY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("%n%m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("MESSAGE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("%n%n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################## ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Log Factor 5 Appender ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################## ")]),a._v("\nlog4j.appender.LF5_APPENDER"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.lf5.LF5Appender \nlog4j.appender.LF5_APPENDER.MaxNumberOfRecords"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("2000\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################## ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# SMTP Appender ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("####################### ")]),a._v("\nlog4j.appender.MAIL"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.net.SMTPAppender \nlog4j.appender.MAIL.Threshold"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("FATAL \nlog4j.appender.MAIL.BufferSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("10 \nlog4j.appender.MAIL.From"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("chenyl@yeqiangwei.com\nlog4j.appender.MAIL.SMTPHost"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mail.hollycrm.com \nlog4j.appender.MAIL.Subject"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Log4J Message \nlog4j.appender.MAIL.To"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("chenyl@yeqiangwei.com\nlog4j.appender.MAIL.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout \nlog4j.appender.MAIL.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %d - %c -%-4r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %-5p %c %x - %m%n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("######################## ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# JDBC Appender ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("####################### ")]),a._v("\nlog4j.appender.DATABASE"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.jdbc.JDBCAppender \nlog4j.appender.DATABASE.URL"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("jdbc:mysql://localhost:3306/test \nlog4j.appender.DATABASE.driver"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("com.mysql.jdbc.Driver \nlog4j.appender.DATABASE.user"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root \nlog4j.appender.DATABASE.password"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" \nlog4j.appender.DATABASE.sql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("INSERT INTO LOG4J "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" VALUES "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'[framework] %d - %c -%-4r [%t] %-5p %c %x - %m%n'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" \nlog4j.appender.DATABASE.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout \nlog4j.appender.DATABASE.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %d - %c -%-4r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %-5p %c %x - %m%n\nlog4j.appender.A1"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.DailyRollingFileAppender \nlog4j.appender.A1.File"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("SampleMessages.log4j \nlog4j.appender.A1.DatePattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("yyyyMMdd-HH"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.log4j'")]),a._v(" \nlog4j.appender.A1.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.xml.XMLLayout\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("################### ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#自定义Appender ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("################### ")]),a._v("\nlog4j.appender.im "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" net.cybercorlin.util.logger.appender.IMAppender\nlog4j.appender.im.host "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" mail.cybercorlin.net \nlog4j.appender.im.username "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" username \nlog4j.appender.im.password "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" password \nlog4j.appender.im.recipient "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" corlin@yeqiangwei.com\nlog4j.appender.im.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout \nlog4j.appender.im.layout.ConversionPattern "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("framework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %d - %c -%-4r "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %-5p %c %x - %m%n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br"),t("span",{staticClass:"line-number"},[a._v("35")]),t("br"),t("span",{staticClass:"line-number"},[a._v("36")]),t("br"),t("span",{staticClass:"line-number"},[a._v("37")]),t("br"),t("span",{staticClass:"line-number"},[a._v("38")]),t("br"),t("span",{staticClass:"line-number"},[a._v("39")]),t("br"),t("span",{staticClass:"line-number"},[a._v("40")]),t("br"),t("span",{staticClass:"line-number"},[a._v("41")]),t("br"),t("span",{staticClass:"line-number"},[a._v("42")]),t("br"),t("span",{staticClass:"line-number"},[a._v("43")]),t("br"),t("span",{staticClass:"line-number"},[a._v("44")]),t("br"),t("span",{staticClass:"line-number"},[a._v("45")]),t("br"),t("span",{staticClass:"line-number"},[a._v("46")]),t("br"),t("span",{staticClass:"line-number"},[a._v("47")]),t("br"),t("span",{staticClass:"line-number"},[a._v("48")]),t("br"),t("span",{staticClass:"line-number"},[a._v("49")]),t("br"),t("span",{staticClass:"line-number"},[a._v("50")]),t("br"),t("span",{staticClass:"line-number"},[a._v("51")]),t("br"),t("span",{staticClass:"line-number"},[a._v("52")]),t("br"),t("span",{staticClass:"line-number"},[a._v("53")]),t("br"),t("span",{staticClass:"line-number"},[a._v("54")]),t("br"),t("span",{staticClass:"line-number"},[a._v("55")]),t("br"),t("span",{staticClass:"line-number"},[a._v("56")]),t("br"),t("span",{staticClass:"line-number"},[a._v("57")]),t("br"),t("span",{staticClass:"line-number"},[a._v("58")]),t("br"),t("span",{staticClass:"line-number"},[a._v("59")]),t("br"),t("span",{staticClass:"line-number"},[a._v("60")]),t("br"),t("span",{staticClass:"line-number"},[a._v("61")]),t("br"),t("span",{staticClass:"line-number"},[a._v("62")]),t("br"),t("span",{staticClass:"line-number"},[a._v("63")]),t("br"),t("span",{staticClass:"line-number"},[a._v("64")]),t("br"),t("span",{staticClass:"line-number"},[a._v("65")]),t("br"),t("span",{staticClass:"line-number"},[a._v("66")]),t("br"),t("span",{staticClass:"line-number"},[a._v("67")]),t("br"),t("span",{staticClass:"line-number"},[a._v("68")]),t("br"),t("span",{staticClass:"line-number"},[a._v("69")]),t("br"),t("span",{staticClass:"line-number"},[a._v("70")]),t("br"),t("span",{staticClass:"line-number"},[a._v("71")]),t("br"),t("span",{staticClass:"line-number"},[a._v("72")]),t("br"),t("span",{staticClass:"line-number"},[a._v("73")]),t("br"),t("span",{staticClass:"line-number"},[a._v("74")]),t("br"),t("span",{staticClass:"line-number"},[a._v("75")]),t("br"),t("span",{staticClass:"line-number"},[a._v("76")]),t("br"),t("span",{staticClass:"line-number"},[a._v("77")]),t("br"),t("span",{staticClass:"line-number"},[a._v("78")]),t("br"),t("span",{staticClass:"line-number"},[a._v("79")]),t("br"),t("span",{staticClass:"line-number"},[a._v("80")]),t("br"),t("span",{staticClass:"line-number"},[a._v("81")]),t("br"),t("span",{staticClass:"line-number"},[a._v("82")]),t("br"),t("span",{staticClass:"line-number"},[a._v("83")]),t("br"),t("span",{staticClass:"line-number"},[a._v("84")]),t("br"),t("span",{staticClass:"line-number"},[a._v("85")]),t("br")])]),t("h3",{attrs:{id:"高级使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高级使用","aria-hidden":"true"}},[a._v("#")]),a._v(" 高级使用")]),a._v(" "),t("p",[a._v("实验目的:")]),a._v(" "),t("ol",[t("li",[a._v("把FATAL级错误写入2000NT日志")]),a._v(" "),t("li",[a._v("WARN, ERROR, FATAL级错误发送email通知管理员\n3.其他级别的错误直接在后台输出")])]),a._v(" "),t("p",[a._v("实验步骤:")]),a._v(" "),t("p",[a._v("输出到2000NT日志")]),a._v(" "),t("ol",[t("li",[a._v("把Log4j压缩包里的NTEventLogAppender.dll拷到WINNT/SYSTEM32目录下")]),a._v(" "),t("li",[a._v("写配置文件log4j.properties")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在2000系统日志输出")]),a._v("\nlog4j.logger.NTlog"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("FATAL, A8\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# APPENDER A8")]),a._v("\nlog4j.appender.A8"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.nt.NTEventLogAppender\nlog4j.appender.A8.Source"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("JavaTest\nlog4j.appender.A8.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout\nlog4j.appender.A8.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("%-4r %-5p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %37c %3x - %m%n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("p",[a._v("3.调用代码:")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("Logger logger2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" Logger.getLogger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"NTlog"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" //要和配置文件中设置的名字相同\nlogger2.debug"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"debug!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger2.info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"info!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger2.warn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"warn!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger2.error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"error!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n//只有这个错误才会写入2000日志\nlogger2.fatal"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fatal!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h3",{attrs:{id:"发送email通知管理员"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发送email通知管理员","aria-hidden":"true"}},[a._v("#")]),a._v(" 发送email通知管理员")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 1. 首先下载JavaMail和JAF, ")]),a._v("\nhttp"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sun"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("j2ee"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("ja"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("javamail"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html\nhttp"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sun"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("beans"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("glasgow"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("jaf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("html\n在项目中引用mail"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar和activation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 2. 写配置文件")]),a._v("\n# 将日志发送到email\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("logger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MailLog")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("WARN"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("A5\n#  APPENDER A5\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A5"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("log4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("net"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SMTPAppender")]),a._v("\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BufferSize")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("To")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("chunjie"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@yeqiangwei")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("com\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("From")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("error"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@yeqiangwei")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("com\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Subject")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ErrorLog")]),a._v("\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SMTPHost")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("smtp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("263.")]),a._v("net\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("log4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PatternLayout")]),a._v("\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("layout"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConversionPattern")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("r "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("37")]),a._v("c "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("x "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v("m"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v("n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 3.调用代码: 把日志发送到mail")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),a._v(" logger3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"MailLog"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("warn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"warn!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"error!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("fatal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fatal!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br")])]),t("h3",{attrs:{id:"在后台输出所有类别的错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在后台输出所有类别的错误","aria-hidden":"true"}},[a._v("#")]),a._v(" 在后台输出所有类别的错误")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.")]),a._v(" 写配置文件\n# 在后台输出\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("logger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("console"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DEBUG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" A1\n# APPENDER A1\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A1"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("log4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConsoleAppender")]),a._v("\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("log4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PatternLayout")]),a._v("\nlog4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("appender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("A1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("layout"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConversionPattern")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("r "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("37")]),a._v("c "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("x "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v("m"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v("n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("．调用代码\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),a._v(" logger1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"console"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("debug")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"debug!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"info!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("warn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"warn!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"error!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlogger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("fatal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fatal!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br")])]),t("p",[a._v("全部配置文件: log4j.properties")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在后台输出")]),a._v("\nlog4j.logger.console"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("DEBUG, A1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# APPENDER A1")]),a._v("\nlog4j.appender.A1"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.ConsoleAppender\nlog4j.appender.A1.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout\nlog4j.appender.A1.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("%-4r %-5p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %37c %3x - %m%n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在2000系统日志输出")]),a._v("\nlog4j.logger.NTlog"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("FATAL, A8\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# APPENDER A8")]),a._v("\nlog4j.appender.A8"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.nt.NTEventLogAppender\nlog4j.appender.A8.Source"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("JavaTest\nlog4j.appender.A8.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout\nlog4j.appender.A8.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("%-4r %-5p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %37c %3x - %m%n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将日志发送到email")]),a._v("\nlog4j.logger.MailLog"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("WARN,A5\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#  APPENDER A5")]),a._v("\nlog4j.appender.A5"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.net.SMTPAppender\nlog4j.appender.A5.BufferSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("5\nlog4j.appender.A5.To"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("chunjie@yeqiangwei.com\nlog4j.appender.A5.From"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("error@yeqiangwei.com\nlog4j.appender.A5.Subject"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("ErrorLog\nlog4j.appender.A5.SMTPHost"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("smtp.263.net\nlog4j.appender.A5.layout"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("org.apache.log4j.PatternLayout\nlog4j.appender.A5.layout.ConversionPattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("%-4r %-5p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("%t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" %37c %3x - %m%n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])]),t("h3",{attrs:{id:"全部代码-log4jtest-java"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全部代码-log4jtest-java","aria-hidden":"true"}},[a._v("#")]),a._v(" 全部代码: Log4jTest.java")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Log4jTest")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PropertyConfigurator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("configure")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"log4j.properties"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//在后台输出")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),a._v(" logger1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"console"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("debug")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"debug!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"info!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("warn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"warn!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"error!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("fatal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fatal!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//在NT系统日志输出")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),a._v(" logger2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"NTlog"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//NTEventLogAppender nla = new NTEventLogAppender();")]),a._v("\n        logger2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("debug")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"debug!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"info!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("warn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"warn!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"error!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//只有这个错误才会写入2000日志")]),a._v("\n        logger2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("fatal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fatal!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//把日志发送到mail")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),a._v(" logger3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Logger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"MailLog"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//SMTPAppender sa = new SMTPAppender();")]),a._v("\n        logger3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("warn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"warn!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"error!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        logger3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("fatal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fatal!!!"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br")])]),t("p",[a._v("写在服务器路径的配置如下:")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("log4j.logger.iplog= INFO, infoFile6\nlog4j.appender.infoFile6=org.apache.log4j.FileAppender\nlog4j.appender.infoFile6.File=${catalina.base}/logs/ipFilter.log\nlog4j.appender.infoFile6.layout=org.apache.log4j.PatternLayout\nlog4j.appender.infoFile6.layout.ConversionPattern=%m %d{yyyy-MM-dd HH:mm:ss} %n\nlog4j.appender.infoFile6.encoding=UTF-8\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])])])},[],!1,null,null,null);s.default=e.exports}}]);