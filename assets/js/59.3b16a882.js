(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{315:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"tip custom-block"},[a("p",[t._v("项目重构整理")])]),t._v(" "),a("h2",{attrs:{id:"废话"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#废话","aria-hidden":"true"}},[t._v("#")]),t._v(" 废话")]),t._v(" "),a("p",[t._v("此篇是 12530 架构重构第二篇, 以 "),a("a",{attrs:{href:"https://github.com/alibaba/p3c/",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里巴巴开发手册"),a("OutboundLink")],1),t._v(" 为基础, 结合自己工作经验, 作为 "),a("code",[t._v("musicsearch-project")]),t._v(" 重构方案的基础部分.\n以此为约束, 希望构建一个"),a("code",[t._v("稳定")]),t._v(", "),a("code",[t._v("易于维护")]),t._v(", "),a("code",[t._v("可扩展")]),t._v(" 的重构方案.")]),t._v(" "),a("p",[t._v("一个项目最怕多种编码风格, 实体名一会 entity, 一会 model, 让维护的人身心疲惫, 因此在一个项目中保持唯一一种编码习惯, 有利于代码维护(比如通过命名, 就知道作用以及所在的包名).")]),t._v(" "),a("p",[a("strong",[t._v("见名知意, 此乃命名的最高境界(体会一下 "),a("code",[t._v("取名10分钟, 编码1分钟")]),t._v(" 的境界 😂).")])]),t._v(" "),a("blockquote",[a("p",[t._v("代码规范看起来比较枯燥, 看完一遍可能只有一点点印象, 因此我采用比较逗比的方式, 尽量让大家一遍就记住.\n代码规范比较偏向个人主义, 每个人的编码习惯都不一样, 所以希望多提出自己的建议, 一起改进(没有最好的规范, 只有最合适的. 🙃)")])]),t._v(" "),a("h2",{attrs:{id:"let-s-go"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#let-s-go","aria-hidden":"true"}},[t._v("#")]),t._v(" Let's go")]),t._v(" "),a("h3",{attrs:{id:"开篇"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开篇","aria-hidden":"true"}},[t._v("#")]),t._v(" 开篇")]),t._v(" "),a("p",[t._v("话说盘古开天辟地之时... 亚当和夏娃诞生混沌之间, 他们从小青梅竹马, 一个会唱 200 首歌, 一个会跳 200 支舞, 后人称他们一个为 二百歌, 一个为 二百舞 ..... (用心去体会😂)")]),t._v(" "),a("h3",{attrs:{id:"这个才是开篇"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#这个才是开篇","aria-hidden":"true"}},[t._v("#")]),t._v(" 这个才是开篇")]),t._v(" "),a("p",[t._v("江湖四分五裂, 一人一江湖...")]),t._v(" "),a("p",[t._v("但我们是一个团队, 为了便于管理和维护, 急需一份代码规范, 来约束我们的编码规则和习惯, 就像修炼一门武林绝学, 需要秘籍的指引(葵花宝典?).")]),t._v(" "),a("p",[t._v("请各位英雄好汉仔细阅读 严格遵守\n如有不足之处 希望提出意见 共商武林统一霸业")]),t._v(" "),a("p",[t._v("从 1000 个哈姆雷特转变为同一个 "),a("strong",[t._v("林志玲")]),t._v(", 代码风格保持统一有利于提高工作效率, 便于管理.")]),t._v(" "),a("p",[t._v("比如:")]),t._v(" "),a("ol",[a("li",[t._v("一看到以 Controller 结尾的类, 就应该知道这个是接口, 用于参数验证, 调用业务类进行处理业务逻辑, 组装结果, 返回数据或者跳转页面;")]),t._v(" "),a("li",[t._v("一看到以 Service 结尾的类, 就知道这个是业务接口类, 用于定义业务接口;")]),t._v(" "),a("li",[t._v("一看到以 Impl 结尾的类, 就应该知道这个是业务实现类, 组合不同的 Dao, 实现业务逻辑;")]),t._v(" "),a("li",[t._v("一看到以 Dao 结尾的类, 就应该知道这个是 DB 操作类, 对数据进行 CRUD 操作;")]),t._v(" "),a("li",[t._v("一看到以 Dto 结尾的类, 就应该知道这个是数据传输对象, 用于展示层和服务层之间的数据传输;")]),t._v(" "),a("li",[t._v("....")])]),t._v(" "),a("h2",{attrs:{id:"约定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#约定","aria-hidden":"true"}},[t._v("#")]),t._v(" 约定")]),t._v(" "),a("p",[t._v("为了避免歧义, 文档大量使用以下词汇, 解释如下:")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("必须")]),t._v(" (must): 绝对, 严格遵循, 请照做, 无条件遵守；")]),t._v(" "),a("li",[a("code",[t._v("一定不可")]),t._v(" (must not): 禁令, 严令禁止；")]),t._v(" "),a("li",[a("code",[t._v("应该")]),t._v(" (should): 强烈建议这样做, 但是不强求；")]),t._v(" "),a("li",[a("code",[t._v("不该")]),t._v(" (should not): 强烈不建议这样做, 但是不强求；")]),t._v(" "),a("li",[a("code",[t._v("可以")]),t._v(" (may) 和 可选 (optional): 选择性高一点, 在这个文档内, 此词语使用较少；")]),t._v(" "),a("li",[a("code",[t._v("推荐")]),t._v(" (recommend): 个人推荐的做法, 不强求;")])]),t._v(" "),a("h2",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作","aria-hidden":"true"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),a("blockquote",[a("p",[t._v("行走江湖, 没有一件趁手的兵器怎么能在江湖中立足, 还在用 "),a("code",[t._v("eclipse")]),t._v(" 的少侠们, 希望弃暗投明, 拥抱 Intellij IDEA, 你会发现编码效率提升不是"),a("strong",[t._v("点巴点儿")]),t._v(", 而是"),a("strong",[t._v("蹭蹭蹭")]),t._v("的往上涨 😁.")])]),t._v(" "),a("p",[a("strong",[t._v("我不是富二代, 我没有赢在人生的起跑线上, 但是我用 Intellij IDEA, 我赢在了工作的起跑线上!")])]),t._v(" "),a("p",[t._v("推荐一个比较全面的 "),a("a",{attrs:{href:"https://github.com/judasn/IntelliJ-IDEA-Tutorial",target:"_blank",rel:"noopener noreferrer"}},[t._v("Intellij IDEA 教程"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("工欲善其事, 必先利其器. 一件趁手的兵器带你迎娶白富美, 走上人生巅峰, 统一江湖, 指日可待")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-E5B0DCDC-184E-4B43-9445-4D37AB01FCB8.png",alt:"E5B0DCDC-184E-4B43-9445-4D37AB01FCB8"}})]),t._v(" "),a("p",[t._v("为了简化手动操作和提高编码效率, 要求安装几个必要的插件, 以及对 IDEA 进行必要的优化配置")]),t._v(" "),a("h3",{attrs:{id:"intellij-idea-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#intellij-idea-插件","aria-hidden":"true"}},[t._v("#")]),t._v(" Intellij IDEA 插件")]),t._v(" "),a("h4",{attrs:{id:"alibaba-java-coding-guidelines"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#alibaba-java-coding-guidelines","aria-hidden":"true"}},[t._v("#")]),t._v(" Alibaba Java Coding Guidelines")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 安装, 代码规范检查的基础")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 代码规则检查")])]),t._v(" "),a("p",[t._v("此插件是 阿里巴巴根据 "),a("a",{attrs:{href:"https://github.com/alibaba/p3c/",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里巴巴开发手册"),a("OutboundLink")],1),t._v(" 开发的一个静态代码规范检查插件, 每个警告都提供了一个 demo,")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15328795139039.jpg",alt:"-w1184"}}),t._v("\n此篇以 "),a("a",{attrs:{href:"https://github.com/alibaba/p3c/",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里巴巴开发手册"),a("OutboundLink")],1),t._v(" 为基础, 但是并不会一一罗列每条规范, 因为此插件已经能很好的检查了.")]),t._v(" "),a("p",[a("strong",[t._v("此篇重点在于这个插件不能检查的规范.")])]),t._v(" "),a("h4",{attrs:{id:"lombok"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lombok","aria-hidden":"true"}},[t._v("#")]),t._v(" lombok")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 安装, 不然代码跑不起来就尴尬了")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 化繁为简. "),a("a",{attrs:{href:"%5Bhttp://projectlombok.org/%5D(http://projectlombok.org/)"}},[t._v("官网")])])]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("@Data")]),t._v(" 代替烦人的 get/set 方法")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15328790004411.jpg",alt:"-w985"}})]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("@Slf4j")]),t._v(" 代替获取 log 实例的代码")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" log "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15328779809729.jpg",alt:"-w587"}})]),t._v(" "),a("p",[a("strong",[t._v("使用方式")]),t._v(":")]),t._v(" "),a("ol",[a("li",[t._v("在pom文件中添加:")])]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- lombok--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.projectlombok"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("lombok"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${lombok.version}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("在 IDEA 中添加插件 "),a("code",[t._v("lombok")]),t._v(" （file->setting->plugins）")]),t._v(" "),a("li",[t._v("IDEA 设置")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15328775278509.jpg",alt:"-w1170"}})]),t._v(" "),a("h4",{attrs:{id:"maven-helper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven-helper","aria-hidden":"true"}},[t._v("#")]),t._v(" Maven Helper")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 安装, 不然依赖冲突了就不好了")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 检查依赖冲突")])]),t._v(" "),a("p",[t._v("新加入一个 jar 包, 谁添加谁负责, 使用此插件检查是否有依赖冲突.")]),t._v(" "),a("p",[t._v("依赖冲突可能会导致:")]),t._v(" "),a("ol",[a("li",[t._v("java.lang.ClassNotFoundException")]),t._v(" "),a("li",[t._v("java.lang.NoSuchMethodError")]),t._v(" "),a("li",[t._v("java.lang.NoClassDefFoundError")]),t._v(" "),a("li",[t._v("开发环境正常, 测试或者生产环境不正常....")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15328788693057.jpg",alt:"-w900"}})]),t._v(" "),a("h4",{attrs:{id:"javadoc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javadoc","aria-hidden":"true"}},[t._v("#")]),t._v(" JavaDoc")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 安装")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 快速生成标准的 javadoc")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-30%2014.28.41.gif",alt:"2018-07-30 14.28.41"}})]),t._v(" "),a("h4",{attrs:{id:"jrebel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jrebel","aria-hidden":"true"}},[t._v("#")]),t._v(" JRebel")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 安装, 提高工作效率的插件.")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 代码热部署插件, 改了代码后, 重新编译, 不用重启应用就可查看效果.")])]),t._v(" "),a("p",[t._v("热部署插件, 谁用谁知道;")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://blog.lanyus.com/search/JRebel/",target:"_blank",rel:"noopener noreferrer"}},[t._v("科学使用方法"),a("OutboundLink")],1),t._v(" (低调点)")]),t._v(" "),a("h4",{attrs:{id:"mybatis-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" Mybatis Plugin")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 安装, 提高工作效率的插件.")])]),t._v(" "),a("p",[a("strong",[t._v("作用: xml 和 dao 快速跳转; 快速生成 xml; xml 检查")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-30%2010.25.12.gif",alt:"2018-07-30 10.25.12"}})]),t._v(" "),a("h4",{attrs:{id:"generateserialversionuid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#generateserialversionuid","aria-hidden":"true"}},[t._v("#")]),t._v(" GenerateSerialVersionUID")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 安装, 提高工作效率的插件")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 为实现了 Serializable 接口的实体快速添加 serialVersionUID, 提高效率")])]),t._v(" "),a("p",[t._v("因为要求实体 "),a("code",[t._v("必须")]),t._v(" 实现 "),a("code",[t._v("Serializable")]),t._v(" 接口, 而且"),a("code",[t._v("必须")]),t._v(" 添加 "),a("code",[t._v("serialVersionUID")]),t._v(" 字段.")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-29%2023.48.26.gif",alt:"2018-07-29 23.48.26"}})]),t._v(" "),a("h4",{attrs:{id:"generateallsetter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#generateallsetter","aria-hidden":"true"}},[t._v("#")]),t._v(" GenerateAllSetter")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 安装, 提高工作效率的插件")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 快速生成 set 方法")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-29%2023.59.07.gif",alt:"2018-07-29 23.59.07"}})]),t._v(" "),a("h4",{attrs:{id:"translation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#translation","aria-hidden":"true"}},[t._v("#")]),t._v(" Translation")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 安装, 提高工作效率的插件")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 翻译插件, 提供 百度, 有道, Google 翻译")])]),t._v(" "),a("p",[t._v("一款为像我这种英语渣的码农量身定做的插件 😂")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-30%2000.05.57.gif",alt:"2018-07-30 00.05.57"}})]),t._v(" "),a("h4",{attrs:{id:"grep-console"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grep-console","aria-hidden":"true"}},[t._v("#")]),t._v(" Grep Console")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 安装")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 高亮显示 log 不同级别日志, 看日志的时候一目了然; 具有 error 级别声音提醒功能(可设置)")])]),t._v(" "),a("p",[t._v("效果:")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15328811376957.jpg",alt:"-w1274"}})]),t._v(" "),a("p",[t._v("插件设置:")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15328811964699.jpg",alt:"-w1189"}}),t._v("\n此插件通过 log 输出中的 info/debug/warn/error 来匹配对应的颜色. 因此 log 输出中必须包含 "),a("strong",[t._v("日志级别")]),t._v(", 这个 "),a("strong",[t._v("日志规范")]),t._v(" 中再说.")]),t._v(" "),a("h4",{attrs:{id:"restfultoolkit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restfultoolkit","aria-hidden":"true"}},[t._v("#")]),t._v(" RestfulToolkit")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 安装")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 快速定位接口, Rest 请求模拟")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-30%2010.32.58.gif",alt:"2018-07-30 10.32.58"}})]),t._v(" "),a("h4",{attrs:{id:"restore-sql-for-ibatis-mybatis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restore-sql-for-ibatis-mybatis","aria-hidden":"true"}},[t._v("#")]),t._v(" Restore Sql for iBatis/Mybatis")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 安装")])]),t._v(" "),a("p",[a("strong",[t._v("作用: 查看请求 sql, 可直接运行")])]),t._v(" "),a("p",[t._v("效果:")]),t._v(" "),a("p",[a("code",[t._v("meeting-service")]),t._v(" 调用 "),a("code",[t._v("/login")]),t._v(" 接口后需要执行的 sql")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329308524148.jpg",alt:"-w999"}})]),t._v(" "),a("h3",{attrs:{id:"intellij-idea-设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#intellij-idea-设置","aria-hidden":"true"}},[t._v("#")]),t._v(" Intellij IDEA 设置")]),t._v(" "),a("h4",{attrs:{id:"编码设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编码设置","aria-hidden":"true"}},[t._v("#")]),t._v(" 编码设置")]),t._v(" "),a("blockquote",[a("p",[t._v("编码 "),a("code",[t._v("必须")]),t._v(" 使用 "),a("code",[t._v("UTF-8")]),t._v(", 且 "),a("code",[t._v("必须")]),t._v(" 设置为 "),a("code",[t._v("with NO BOM")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329216121953.jpg",alt:"-w1036"}})]),t._v(" "),a("p",[a("code",[t._v("踩坑")])]),t._v(" "),a("p",[a("strong",[t._v("Windows 下请不要用记事本打开 UFT-8 编码的文本文件, 更不要保存")])]),t._v(" "),a("p",[t._v("Windows 坑的很, UTF-8 编码的文本文件最前面会给你加上一个 BOM, 其他系统打开是正常显示, 但是不会显示这个 BOM, 造成文件解析出错.")]),t._v(" "),a("h5",{attrs:{id:"html-设置编码为-utf-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#html-设置编码为-utf-8","aria-hidden":"true"}},[t._v("#")]),t._v(" html 设置编码为 UTF-8")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("blockquote",[a("p",[t._v("html 或者模板 "),a("code",[t._v("应该")]),t._v(" 使用 html5")])]),t._v(" "),a("p",[t._v("html4 升级为 html5 非常简单")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token doctype"}},[t._v('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Content-Type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/html;charset=UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("css.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jquery.js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}}),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("修改为:")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token doctype"}},[t._v("<!DOCTYPE html>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("css.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jquery.js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}}),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("简单的升级, 就能享受 30 多个新标签带来的便捷, 何乐而不为呢?")]),t._v(" "),a("p",[t._v("就跟超市打折一样, 还倒送你30块, 跳广场舞的大妈排着队去, 你还不去?")]),t._v(" "),a("h5",{attrs:{id:"tomcat-设置编码为-utf-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tomcat-设置编码为-utf-8","aria-hidden":"true"}},[t._v("#")]),t._v(" Tomcat 设置编码为 UTF-8")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Connector")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("8080"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("protocol")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("HTTP/1.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("connectionTimeout")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("20000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("redirectPort")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("8443"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("改为:")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Connector")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("8080"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("protocol")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("HTTP/1.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("connectionTimeout")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("20000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("redirectPort")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("8443"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("URIEncoding")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("Tomcat7 默认编码为 ISO-8859-1, 到了 Tomcat8 后, 默认编码改为 UTF-8\n因此以上修改只针对于 Tomcat7.")]),t._v(" "),a("h4",{attrs:{id:"todo-标识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#todo-标识","aria-hidden":"true"}},[t._v("#")]),t._v(" todo 标识")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")])])]),t._v(" "),a("p",[a("strong",[t._v("作用: 方便搜索, 明确负责人, 说明 todo 原因")])]),t._v(" "),a("p",[t._v("这里扩展了 IDEA 自带的 todo 标识, 使用 "),a("code",[t._v("todo-负责人: (时间) [原因]")]),t._v(" 来规范 "),a("code",[t._v("todo")]),t._v(" 用法")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329324780441.jpg",alt:"-w1172"}})]),t._v(" "),a("div",{staticClass:"language-lua line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-lua"}},[a("code",[t._v("todo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("负责人"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$date$ $time$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("$SELECTION$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("date time 设置见 类注释一节")])]),t._v(" "),a("p",[t._v("效果:")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-30%2014.35.26.gif",alt:"2018-07-30 14.35.26"}})]),t._v(" "),a("h4",{attrs:{id:"fixme-标识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fixme-标识","aria-hidden":"true"}},[t._v("#")]),t._v(" fixme 标识")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")])])]),t._v(" "),a("div",{staticClass:"language-lua line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-lua"}},[a("code",[t._v("fixme"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("负责人"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$date$ $time$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("$SELECTION$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("设置和效果同上")]),t._v(" "),a("h4",{attrs:{id:"类注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类注释","aria-hidden":"true"}},[t._v("#")]),t._v(" 类注释")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 为每个类添加必要的注释")])]),t._v(" "),a("p",[t._v("这里有2中方式:")]),t._v(" "),a("p",[a("strong",[t._v("1. 新建类时添加注释")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-30%2014.51.14.gif",alt:"2018-07-30 14.51.14"}})]),t._v(" "),a("p",[t._v("设置方式:")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329339225336.jpg",alt:"-w1185"}})]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("#"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PACKAGE_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PACKAGE_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("PACKAGE_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("#end\n##"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"File Header.java"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * <p>Company: 科大讯飞股份有限公司-四川分公司</p>\n * <p>Description: ${description}</p>\n ¶*\n * @author 你的昵称\n * @date ${YEAR}-${MONTH}-${DAY} ${HOUR}:${MINUTE}\n * @email 域名@iflytek.com\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[a("strong",[t._v("2. 为已存在的类添加注释")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-30%2014.54.17.gif",alt:"2018-07-30 14.54.17"}})]),t._v(" "),a("p",[t._v("设置方式:")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329341699207.jpg",alt:"-w1112"}})]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * <p>Company: 科大讯飞股份有限公司-四川分公司</p>\n * <p>Description: $END$</p>\n *\n * @author 你的昵称\n * @date $date$ $time$\n * @email 域名@iflytek.com\n */")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h4",{attrs:{id:"方法注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法注释","aria-hidden":"true"}},[t._v("#")]),t._v(" 方法注释")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 使用 JavaDoc 插件自动生成")])]),t._v(" "),a("p",[t._v("JavaDoc 只能自动生成非 "),a("code",[t._v("private")]),t._v(" 方法和属性的注释, 如果需要生成 "),a("code",[t._v("private")]),t._v(" 级的注释, 可以通过修改 "),a("code",[t._v("public")]),t._v(", 生成完成后, 再修改回来")]),t._v(" "),a("h4",{attrs:{id:"代码注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码注释","aria-hidden":"true"}},[t._v("#")]),t._v(" 代码注释")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("不该")]),t._v(" 使用行尾注释;\n"),a("code",[t._v("推荐")]),t._v(" 使用 // 代替 /*...*/ 多行注释;\n"),a("code",[t._v("推荐")]),t._v(" 使用 /**..*/ 对字段进行注释(单行);\n所有字段名, 方法名, 类名 都 "),a("code",[t._v("应该")]),t._v(" 使用简单, 业界常用的单词命名, 不要为了注释而注释, 讲究个代码之美.")])]),t._v(" "),a("p",[t._v("在查看大段代码时, "),a("code",[t._v("推荐")]),t._v(" 使用")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// region 段注释")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//endregion")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[a("strong",[t._v("此注释能增加代码折叠功能, 便于快速梳理代码")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-30%2022.44.45.gif",alt:"2018-07-30 22.44.45"}})]),t._v(" "),a("h3",{attrs:{id:"version-control-设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#version-control-设置","aria-hidden":"true"}},[t._v("#")]),t._v(" Version Control 设置")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 忽略 target 目录\n"),a("code",[t._v("必须")]),t._v(" 忽略 .idea\n"),a("code",[t._v("必须")]),t._v(" 忽略 *.iml\n"),a("code",[t._v("必须")]),t._v(" 添加 .ignore 文件")])]),t._v(" "),a("p",[a("strong",[t._v("如果使用 git, 所有忽略文件都可以添加到 .ignore 即可")])]),t._v(" "),a("p",[a("strong",[t._v("提交代码时的设置")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329625162083.jpg",alt:"-w1089"}})]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 勾选 Optimize imports; (提交代码时, 自动删除不被使用的 import)\n"),a("code",[t._v("推荐")]),t._v(" 取消掉默认勾选的 Perform code analysis 和 Check TODO, 会增加提交代码的时间;\n"),a("code",[t._v("不该")]),t._v(" 勾选 Reformat code, 会格式化所有提交的代码, 格式化代码应该自己手动格式化, 这样能减少代码冲突的可能;")])]),t._v(" "),a("h2",{attrs:{id:"代码样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码样式","aria-hidden":"true"}},[t._v("#")]),t._v(" 代码样式")]),t._v(" "),a("p",[t._v("以 intellij-java-google-style.xml 为基础, 做了一部分修改.")]),t._v(" "),a("blockquote",[a("p",[t._v("musicsearch-project "),a("code",[t._v("必须的必须")]),t._v(" 使用此代码样式, 为了减少代码冲突, 同一代码样式 (同一门派, 你去修炼其他门派武功, 会被逐出师门的!).")])]),t._v(" "),a("p",[t._v("比如:")]),t._v(" "),a("ol",[a("li",[t._v("一行的代码长度不能超过 140 宽;")]),t._v(" "),a("li",[t._v("等号对齐;")]),t._v(" "),a("li",[t._v("if 语句只有一行也 "),a("code",[t._v("必须")]),t._v(" 加大括号;")]),t._v(" "),a("li",[t._v("所有操作符两边 "),a("code",[t._v("必须")]),t._v(" 有空格;")]),t._v(" "),a("li",[t._v("类名, 方法名 "),a("code",[t._v("必须")]),t._v(" 加空格后才跟 一个 "),a("code",[t._v("{")]),t._v(";")]),t._v(" "),a("li",[t._v("使用 4 个空格代替制表符(我们这里不讨论空格好还是制表符好, 统一使用一种是最最好的);")]),t._v(" "),a("li",[t._v("....")])]),t._v(" "),a("p",[a("strong",[t._v("以上列举的部分规范都可以使用格式化解决;")])]),t._v(" "),a("p",[t._v("本人对代码有着严(变)格(态)的要求, 严(变)格(态)到使用 "),a("code",[t._v("//")]),t._v(" 后面 "),a("code",[t._v("必须")]),t._v(" 跟一个空格, 然后才是注释内容; 英文和中文之间 "),a("code",[t._v("必须")]),t._v(" 增加一个空格; 所有标点全部使用英文标点; 没有被使用的类, 变量都 "),a("code",[t._v("必须")]),t._v(" 删除; 遇到的警告 "),a("code",[t._v("必须")]),t._v(" 尽最大努力改正;")]),t._v(" "),a("p",[t._v("左边为重构之前的警告数量(黄色), 右边为重构之后的")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329635760293.jpg",alt:"-w1152"}})]),t._v(" "),a("ol",[a("li",[t._v("英文和中文之间增加空格是为了便于阅读, 方便拷贝(双击英文即可全选, 如果不增加空格, 中文英文则会全被选中. 我变态到 chrome 都要安装一个叫 "),a("code",[t._v("空格之神")]),t._v(" 的插件, 用于在中英文之间追加空格);")]),t._v(" "),a("li",[t._v("全部使用英文标点的好处不言而喻, Java 乃至所有的编程语言都不支持中文标点, 打个分号还得切换输入法, 想想都忧伤; 有时候就是因为中文标点的问题, 一直报错(输入法可以设置中文时使用英文标点, "),a("code",[t._v("推荐")]),t._v(" 这种设置);")]),t._v(" "),a("li",[t._v("符号后面喜欢追加一个空格, 是受 Markdown 语法的影响, 以前用过很多 Markdown 编辑工具, 由于解析语法不一样, 迁移时渲染不生效, 加个空格或者换行就 Ok 了; 😂")]),t._v(" "),a("li",[t._v("及时删除不需要的代码, 时刻保持代码干净(IDEA 会帮我们检查未使用的代码).")]),t._v(" "),a("li",[a("strong",[t._v("警告是 bug 的温床, 修复警告, 就是修复潜在的 bug")]),t._v(". 修复警告, 也能学到很多东西的 (😎)")])]),t._v(" "),a("h2",{attrs:{id:"musicsearch-project-规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#musicsearch-project-规范","aria-hidden":"true"}},[t._v("#")]),t._v(" musicsearch-project 规范")]),t._v(" "),a("p",[t._v("以下作为 "),a("code",[t._v("musicsearch-project")]),t._v(" 规范, 制定了大部分要求.")]),t._v(" "),a("p",[t._v("具体设计将在 第三篇 介绍")]),t._v(" "),a("h3",{attrs:{id:"项目结构规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目结构规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目结构规范")]),t._v(" "),a("div",{staticClass:"language-lua line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-lua"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("business            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" 业务主模块\n│   ├── business"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("common             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" 业务公共类库\n│   ├── mservice"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("migu"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("game          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" migu"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("game 业务\n│   └── service"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("meeting             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" meeting 服务模块\n├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("common              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" musicsearch 项目 公共模块\n├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("component           "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" 组件主模块\n│   ├── component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("iavp              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" iavp 模块"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 封装 iavp 相关实体和接口"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 直接注入即可\n│   ├── component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("mybatis           "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" mybatis模块"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 提供代码生成和 mybatis 相关功能\n│   ├── component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("redis             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" redis 模块"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 注入 RedisService 即可"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 提供多种模式\n│   └── component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("websocket         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" websocket 模块 netty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io 封装\n├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("demo                "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" demo 主模块\n│   ├── component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("mybatis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("demo\n│   └── component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("demo\n├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dependencies        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" 管理第三方 jar 版本和依赖关系\n├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("monitor             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" 监控主模块\n├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("parent              "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" musicsearch 工程主模块"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 管理整个功能的版本及依赖\n│   └── docs                        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" 放工程相关文档\n│   └── database                    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" 放工程 sql\n└── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("support             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("#")]),t._v(" 支撑模块主模块\n    ├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("generator  \n    ├── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("management"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("system\n    └── musicsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("timer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("task\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br")])]),a("p",[t._v("目前重构后的模块, 可能还会有修改.\n但是几个主要模块不会再修改了.")]),t._v(" "),a("blockquote",[a("p",[t._v("整个项目结构采用 "),a("code",[t._v("Maven")]),t._v(" 多模块的方式开发.\n目的是为了解决 jar 依赖混乱问题.")])]),t._v(" "),a("p",[a("strong",[t._v("结构规范:")])]),t._v(" "),a("blockquote",[a("p",[t._v("所有主模块 "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v("musicsearch-")]),t._v(" 开始.")])]),t._v(" "),a("p",[t._v("不为别的, 纯属统一前缀, 好看而已")]),t._v(" "),a("blockquote",[a("p",[t._v("模块名 "),a("code",[t._v("必须")]),t._v(" 全部使用小写, 单词之间作用 "),a("code",[t._v("-")]),t._v(" 分隔;")])]),t._v(" "),a("h4",{attrs:{id:"musicsearch-parent"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#musicsearch-parent","aria-hidden":"true"}},[t._v("#")]),t._v(" musicsearch-parent")]),t._v(" "),a("p",[t._v("作为整个项目的 灵魂 模块, 管理所有自有模块的版本和依赖关系, 以及整个项目都会使用到的依赖, 比如 "),a("code",[t._v("lombok")]),t._v(", "),a("code",[t._v("junit")]),t._v(" 等.")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15330039207873.jpg",alt:"-w1004"}}),t._v(" "),a("code",[t._v("dependencyManagement")]),t._v(" 标签只是用于声明可能会被使用到的依赖 (就像定义变量), 不会真正添加依赖\n"),a("code",[t._v("dependency")]),t._v(" 才会真正真正引入依赖")]),t._v(" "),a("p",[t._v("这里全部为 "),a("code",[t._v("musicsearch-project")]),t._v(" 自有模块, 以后新增的模块也 "),a("code",[t._v("必须")]),t._v(" 将声明添加到此标签下\n自有模块之间依赖就可直接使用.")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15330045748142.jpg",alt:"-w1004"}}),t._v("\n使用时, "),a("code",[t._v("一定不可")]),t._v(" 添加 version 标签, 不然就会使用修改后的版本, 可能会造成依赖冲突.")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("code",[t._v("musicsearch-project")]),t._v(" 模块下有一个 doc 目录, 用于保存文本文档")]),t._v(" "),a("p",[t._v("个人认为, 项目的 "),a("code",[t._v("技术文档")]),t._v(" 跟着代码走才是最正确的做法.\n随时修改, 随时查看, 代码和文档一起更新提交, 才是最佳实践.")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15330065876404.jpg",alt:"-w1004"}}),t._v("\n技术文档 "),a("code",[t._v("推荐")]),t._v(" 使用 "),a("code",[t._v("Markdown")]),t._v(" 语法编写, 最好是 "),a("a",{attrs:{href:"https://guides.github.com/features/mastering-markdown/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Markdown 语法"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("这里给出模块说明模板, 每个模块都 "),a("code",[t._v("必须")]),t._v(" 有此文档")]),t._v(" "),a("div",{staticClass:"language-markdown line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 模块名")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" 简介")]),t._v("\n\nxxx\n\n"),a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" 打包方式")]),t._v("\n\nxxx\n\n"),a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" 部署方式")]),t._v("\n\nxxx\n\n"),a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" 使用说明")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("1.")]),t._v(" xxx\n"),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("2.")]),t._v(" xxx\n"),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("3.")]),t._v(" xxx\n\n"),a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" 注意事项")]),t._v("\n\nxxx\n\n"),a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" 更新历史")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token bold"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")]),t._v("更新时间 更新人"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("1.")]),t._v(" xxx\n"),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("2.")]),t._v(" xxx\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br")])]),a("hr"),t._v(" "),a("p",[a("code",[t._v("database")]),t._v(" 用于保存需求需要更新的 sql 文件, "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v(".sql")]),t._v(" 为后缀, "),a("code",[t._v("必须")]),t._v(" 是 UTF-8 编码.")]),t._v(" "),a("h4",{attrs:{id:"musicsearch-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#musicsearch-dependencies","aria-hidden":"true"}},[t._v("#")]),t._v(" musicsearch-dependencies")]),t._v(" "),a("p",[t._v("此模块是为了方便管理第三方 jar 依赖而特意添加的, 如果没有此模块, 第三方依赖也可以添加到 "),a("code",[t._v("musicsearch-project")]),t._v("中, 但是会造成过度臃肿, 因此将第三方依赖拆分到此模块中进行统一管理.")]),t._v(" "),a("blockquote",[a("p",[t._v("第三方依赖 "),a("code",[t._v("必须")]),t._v(" 添加到此模块, 且 "),a("code",[t._v("必须")]),t._v(" 将版本号设置到 properties 标签下.\n第三方依赖较大可能存在版本冲突, 因此此模块的版本从 "),a("code",[t._v("0.0.1")]),t._v(" 开始, 不和 "),a("code",[t._v("musicsearch-parent")]),t._v(" 相同, 如果此模块存在依赖问题, 修复后, 需要提升版本号, 并且 "),a("code",[t._v("必须")]),t._v(" 写更新记录.")])]),t._v(" "),a("p",[t._v("此模块比较特殊, 修改会比较频繁, 依赖出错大部分出现在此模块, 因此单独写一个 "),a("code",[t._v("changes.md")]),t._v(", 用于记录更新日志.")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15330079677253.jpg",alt:"-w1004"}})]),t._v(" "),a("p",[a("strong",[t._v("引入新依赖步骤")])]),t._v(" "),a("ol",[a("li",[t._v("在 "),a("code",[t._v("musicsearch-dependencies")]),t._v(" 添加新依赖;")]),t._v(" "),a("li",[t._v("将版本信息写入到 pom 的 properties 标签内, 进行统一管理;")]),t._v(" "),a("li",[t._v("在需要的模块中, 引入依赖;")]),t._v(" "),a("li",[t._v("最后使用 "),a("code",[t._v("Maven Helper")]),t._v(" 排查是否存在依赖冲突;")]),t._v(" "),a("li",[t._v("如果存在冲突 需要使用 "),a("code",[t._v("<exclusions>")]),t._v(" 排除相应的依赖;")])]),t._v(" "),a("h4",{attrs:{id:"musicsearch-common"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#musicsearch-common","aria-hidden":"true"}},[t._v("#")]),t._v(" musicsearch-common")]),t._v(" "),a("p",[a("code",[t._v("musicsearch-project")]),t._v(" 项目的子模块, 作为最底层的依赖, 提供了公共 util 包, core 包, base 包等基础代码.")]),t._v(" "),a("blockquote",[a("p",[t._v("如果被整个项目使用到的代码, 都 "),a("code",[t._v("必须")]),t._v(" 放入此模块, 比如 StringUtils 工具类, 一些加密类, 整个项目都能使用到的常量类, 枚举类等;")])]),t._v(" "),a("p",[a("strong",[t._v("必须要提出的是:")])]),t._v(" "),a("p",[t._v("不要多个模块多个 StringUtils 工具类, 最佳实践 "),a("code",[t._v("应该")]),t._v(" 是 "),a("code",[t._v("musicsearch-common")]),t._v(" 中编写一个通用的 "),a("code",[t._v("StringUtils")]),t._v(" 类, 继承自 "),a("code",[t._v("org.apache.commons.lang3.StringUtils")]),t._v(" 类, 业务模块继承 "),a("code",[t._v("musicsearch-common")]),t._v(" 模块中的 "),a("code",[t._v("StringUtils")]),t._v(" 类, 实现业务相关的字符串处理工具类.(这种方式同样适用于其他类)")]),t._v(" "),a("h4",{attrs:{id:"musicsearch-business"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#musicsearch-business","aria-hidden":"true"}},[t._v("#")]),t._v(" musicsearch-business")]),t._v(" "),a("p",[t._v("业务模块的父模块, "),a("code",[t._v("musicsearch-parent")]),t._v(" 模块的子模块.\n用于管理业务模块共用的 jar 依赖.")]),t._v(" "),a("blockquote",[a("p",[t._v("所有业务模块 "),a("code",[t._v("必须")]),t._v(" 是 "),a("code",[t._v("musicsearch-business")]),t._v(" 的子模块")])]),t._v(" "),a("p",[t._v("将业务代码全部整合在一个模块中, 使用业务名进行再分子模块的方式, 管理整个业务代码.\n其他共用模块作为框架基础模块, 以后新项目还可以复用.")]),t._v(" "),a("blockquote",[a("p",[t._v("不提供 "),a("code",[t._v("dubbo service")]),t._v(" 的模块, "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v("service-")]),t._v(" 开始.\n提供 "),a("code",[t._v("dubbo service")]),t._v(" 的模块, "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v("mservice-")]),t._v(" 开始.")])]),t._v(" "),a("p",[a("code",[t._v("mservice")]),t._v(" 的意思是 "),a("code",[t._v("micro-service")]),t._v(". 这样便于区分不同的服务类型, 也方便分组.")]),t._v(" "),a("p",[t._v("我们现在使用 "),a("code",[t._v("dubbo")]),t._v(" 服务治理框架, 如果以后有可能话, 可以很方便的迁移到 "),a("code",[t._v("SOFA")]),t._v(" 或者 "),a("code",[t._v("Spring Cloud")]),t._v(" (我就说说, 应该是不可能的事了).")]),t._v(" "),a("p",[t._v("业务子模块除了 "),a("code",[t._v("business-common")]),t._v(" 模块, 其他子模块都以 Web 应用 或者 JVM 进程直接提供服务.")]),t._v(" "),a("h4",{attrs:{id:"business-common"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#business-common","aria-hidden":"true"}},[t._v("#")]),t._v(" business-common")]),t._v(" "),a("p",[a("code",[t._v("musicsearch-business")]),t._v(" 模块的子模块, 依赖于 "),a("code",[t._v("musicsearch-common")]),t._v(".")]),t._v(" "),a("blockquote",[a("p",[t._v("业务模块共用的代码 "),a("code",[t._v("必须")]),t._v(" 放入 "),a("code",[t._v("business-common")]),t._v(" 模块.")])]),t._v(" "),a("p",[t._v("比如所有业务都会用到的 redis key 常量类, 则 "),a("code",[t._v("必须")]),t._v(" 放在 "),a("code",[t._v("business-common")]),t._v(" 模块中;\n而 "),a("code",[t._v("service-meeting")]),t._v(" 这个模块的业务用到的 redis key 常量则 "),a("code",[t._v("必须")]),t._v(" 放到 "),a("code",[t._v("service-meeting")]),t._v(" 模块中.")]),t._v(" "),a("p",[t._v("讲究职责分离, 层级分明, 互不干涉; 你走你的阳关道, 我看我的 西虹市首富.")]),t._v(" "),a("h3",{attrs:{id:"模块名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块名","aria-hidden":"true"}},[t._v("#")]),t._v(" 模块名")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 全部为小写, 单词之间 "),a("code",[t._v("必须")]),t._v(" 使用 "),a("code",[t._v("-")]),t._v(" 分隔.")])]),t._v(" "),a("p",[t._v("不要随心所欲的命名, 要讲究的规则, 不然会走火入魔的.")]),t._v(" "),a("blockquote",[a("p",[t._v("provider 模块名 "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v("mservice-")]),t._v(" 开头;")])]),t._v(" "),a("p",[t._v("provider 模块也有可能是服务消费者, 这类的模块, 还是 "),a("code",[t._v("应该")]),t._v(" 使用 "),a("code",[t._v("mservice-")]),t._v(" 开头")]),t._v(" "),a("p",[t._v("对于 provider 模块, 至少应该分为 2 层;")]),t._v(" "),a("ol",[a("li",[t._v("服务名-interface ,提供给 consumer 的依赖模块")]),t._v(" "),a("li",[t._v("服务名-service ,业务处理模块")])]),t._v(" "),a("blockquote",[a("p",[t._v("服务名-interface 模块 "),a("code",[t._v("必须")]),t._v(" 包含用到的实体类, 接口定义, dubbo-consumer-服务名.xml, 共用的 util 类, 枚举类等;")])]),t._v(" "),a("p",[a("strong",[t._v("必须要提出的是:")])]),t._v(" "),a("p",[a("code",[t._v("dubbo-consumer-服务名.xml")]),t._v(" 配置文件 "),a("code",[t._v("应该")]),t._v(" 由 provider 来维护, 而 consumer 只需要 import 此配置文件即可, 而不是在自己的 Spring 配置文件或者自定义一个 dubbo 配置文件再来写引入的接口.")]),t._v(" "),a("p",[t._v("这就是为什么 "),a("code",[t._v("dubbo-consumer-服务名.xml")]),t._v(" "),a("code",[t._v("应该")]),t._v(" 在 interface 模块的原因.")]),t._v(" "),a("p",[t._v("这里看看 migu-game 重构之前的结构(有一些小改动)")]),t._v(" "),a("p",[a("strong",[t._v("配置关系:")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15330426626280.jpg",alt:"-w871"}})]),t._v(" "),a("p",[t._v("这里的 dubbo.xml 即 provider 配置, 前面也说了, 这样的命名方式不够直观, 因此 "),a("code",[t._v("应该")]),t._v(" 采用 "),a("code",[t._v("dubbo-provider-服务名")]),t._v(" 的方式命名;")]),t._v(" "),a("p",[t._v("Spring-config.xml 是主配置, 导入了其他 5 个配置;")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resource")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("spring/dubbo.xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resource")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("spring/mybatis.xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resource")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("spring/dataSource.xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resource")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("classpath*:applicationContext-jms.xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resource")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("classpath*:applicationContext-redis.xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("code",[t._v("applicationContext-jms.xml")]),t._v(" 和 "),a("code",[t._v("applicationContext-redis.xml")]),t._v(" 这 2 个配置原来是放在 web.xml 中的.\n这里迁入到 Spring-config.xml 中, 因为 web.xml 只需要负责加载 Spring-config.xml 即可, web.xml 写好之后, 基本不需要修改, 所有配置关系全部在 Spring-config.xml 中管理.")]),t._v(" "),a("p",[t._v("那么问题来了\n"),a("strong",[t._v("dubbo 的 consumer 配置在哪里呢?")])]),t._v(" "),a("p",[t._v("找了半天, 原来在 funclib 模块的 "),a("code",[t._v("applicationContext-mainflowfunc.xml")]),t._v(" 配置中...")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-1B05F3A1-A94C-423D-84EC-BD37A9BE588D.png",alt:"1B05F3A1-A94C-423D-84EC-BD37A9BE588D"}})]),t._v(" "),a("p",[t._v("那么问题又来了")]),t._v(" "),a("p",[t._v("如果 migu-game 由合肥的同事开发, 需要增加几个接口, 使用 migu-game 服务的是成都的小明同学, 正在开发 funclib, 这个时候请问....")]),t._v(" "),a("p",[a("strong",[t._v("小明中午吃了啥?")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-30DC9C5B-919D-4DBE-82A0-90372A0380C0.png",alt:"-w278"}})]),t._v(" "),a("blockquote",[a("p",[t._v("如果 dubbo consumer 配置由 funclib 维护, 那么就要修改 funclib 模块的配置;\n如果 dubbo consumer 配置由 migu-game 维护, 合肥的同事只需要提供 migu-game-interface, funclib 只需引入 "),a("code",[t._v("dubbo-consumer-migugame.xml")]),t._v(";")])]),t._v(" "),a("p",[a("code",[t._v("服务名-interface")]),t._v(" 还应该依赖 "),a("code",[t._v("dubbo")]),t._v(" 相关 jar 依赖, 这样 consumer 就不需要自己引入 "),a("code",[t._v("dubbo")]),t._v(" 相关依赖了;")]),t._v(" "),a("p",[t._v("服务行业嘛, 要做就做全套")]),t._v(" "),a("p",[a("strong",[t._v("最佳实践")])]),t._v(" "),a("p",[t._v("个人认为, 一个 "),a("code",[t._v("mservice")]),t._v(" 最好分为 3 层;")]),t._v(" "),a("ol",[a("li",[t._v("interface 层;")]),t._v(" "),a("li",[t._v("service 层;")]),t._v(" "),a("li",[t._v("dao 层;")])]),t._v(" "),a("p",[t._v("interface 已经说过了;\nservice 层, 作为业务层, 依赖于 dao 层和 interface 层;")]),t._v(" "),a("p",[t._v("各层的 pom 中只依赖每层需要的 jar 依赖. 比如 duubo 的依赖 "),a("code",[t._v("应该")]),t._v(" 写在 interface 层, "),a("code",[t._v("mybatis")]),t._v(" 和数据库驱动依赖 "),a("code",[t._v("应该")]),t._v(" 写在 dao 层, 而 service 层依赖业务相关的 jar.")]),t._v(" "),a("p",[t._v("这样将所有依赖下放到不同层中, 以一种插件化的方式提供服务, 导入某层依赖, 连带引入了这层需要的依赖. 这样 jar 依赖关系明确, 也很好管理.")]),t._v(" "),a("p",[a("code",[t._v("musicsearch-project")]),t._v(" 的思想就是这样, 以 "),a("code",[t._v("分而治之")]),t._v(" 的方式管理代码和依赖关系, 也就是个解耦的思想.\n而不是将所有依赖全部扔到 common 或者 service 中, 方便是方便, 维护起来想死的心都有了.")]),t._v(" "),a("p",[t._v("interface 模块, 就是一个提供给 consumer 的说明, 告诉 consumer, 我这个 interface 提供了哪些功能, 没有具体实现.")]),t._v(" "),a("p",[t._v("而 API 全称 Application Program Interface, 即应用程序接口, 是一组定义,程序及协议的集合.\n因此我将 服务名-api 用于向外提供 rest api 的模块.")]),t._v(" "),a("p",[t._v("相关的包名也是如此.")]),t._v(" "),a("h3",{attrs:{id:"包名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#包名","aria-hidden":"true"}},[t._v("#")]),t._v(" 包名")]),t._v(" "),a("blockquote",[a("p",[t._v("所有包名 "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v("com.iflytek.musicsearch")]),t._v(" 开始")])]),t._v(" "),a("p",[t._v("其他规则:")]),t._v(" "),a("ul",[a("li",[t._v("组件模块: "),a("code",[t._v("com.iflytek.musicsearch.component.组件名")])]),t._v(" "),a("li",[t._v("公共类库: "),a("code",[t._v("com.iflytek.musicsearch.common")])]),t._v(" "),a("li",[t._v("服务模块: "),a("code",[t._v("com.iflytek.musicsearch.服务名")])])]),t._v(" "),a("p",[a("code",[t._v("推荐")]),t._v(" 几个常用的包名")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("config")]),t._v(" 用来放配置类")]),t._v(" "),a("li",[a("code",[t._v("util")]),t._v(" 工具类包")]),t._v(" "),a("li",[a("code",[t._v("enums")]),t._v(" 枚举类包")]),t._v(" "),a("li",[a("code",[t._v("constant")]),t._v(" 常量类包 ("),a("code",[t._v("推荐")]),t._v(" 将常量按类别定义在不同的常量类中)")]),t._v(" "),a("li",[a("code",[t._v("service")]),t._v(" service 接口包")]),t._v(" "),a("li",[a("code",[t._v("service.impl")]),t._v(" service 接口实现类包")]),t._v(" "),a("li",[a("code",[t._v("dao")]),t._v(" dao 接口包")]),t._v(" "),a("li",[a("code",[t._v("interfaces")]),t._v(" 特指 provider 提供的接口类")]),t._v(" "),a("li",[a("code",[t._v("api")]),t._v(" 特指 rest api")])]),t._v(" "),a("h3",{attrs:{id:"类名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类名","aria-hidden":"true"}},[t._v("#")]),t._v(" 类名")]),t._v(" "),a("p",[t._v("类名 "),a("code",[t._v("必须")]),t._v(" 使用 UpperCamelCase 风格(首字母都大写), 必须遵从驼峰形式. 例如: StringUtils")]),t._v(" "),a("blockquote",[a("p",[t._v("抽象类命名 "),a("code",[t._v("必须")]),t._v(" 使用 Abstract 或 Base 开头;\n异常类命名 "),a("code",[t._v("必须")]),t._v(" 使用 Exception 结尾;\n测试类命名 "),a("code",[t._v("必须")]),t._v(" 以它要测试的类的名称开始, 以 Test 结尾;\n接口实现类 "),a("code",[t._v("必须")]),t._v(" 以 Impl 结尾;\nAPI 接口类必须以 "),a("code",[t._v("Controller")]),t._v(" 结尾;\nORM接口必须以 "),a("code",[t._v("Dao")]),t._v(" 结尾;")])]),t._v(" "),a("h3",{attrs:{id:"方法名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法名","aria-hidden":"true"}},[t._v("#")]),t._v(" 方法名")]),t._v(" "),a("p",[t._v("Dao 接口名 "),a("code",[t._v("推荐")]),t._v(" 使用以下命名方式")]),t._v(" "),a("p",[t._v("新增:")]),t._v(" "),a("ul",[a("li",[t._v("add(Entity entity)")]),t._v(" "),a("li",[t._v("insert(Entity entity)")]),t._v(" "),a("li",[t._v("save(Entity entity)")])]),t._v(" "),a("p",[t._v("查询:")]),t._v(" "),a("ul",[a("li",[t._v("get(Long id)")]),t._v(" "),a("li",[t._v("getByXxx")]),t._v(" "),a("li",[t._v("findByXxx")]),t._v(" "),a("li",[t._v("selectByXxx")])]),t._v(" "),a("p",[t._v("更新:")]),t._v(" "),a("ul",[a("li",[t._v("update(Entity entity)")]),t._v(" "),a("li",[t._v("updateByXxx")])]),t._v(" "),a("p",[t._v("删除:")]),t._v(" "),a("ul",[a("li",[t._v("delete(Long id)")]),t._v(" "),a("li",[t._v("deleteByXxx")])]),t._v(" "),a("h3",{attrs:{id:"属性名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#属性名","aria-hidden":"true"}},[t._v("#")]),t._v(" 属性名")]),t._v(" "),a("p",[t._v("这个没什么好说的, 按照 Java 推荐命名方式即可.")]),t._v(" "),a("blockquote",[a("p",[t._v("常量命名 "),a("code",[t._v("必须")]),t._v(" 全部大写, 单词间用下划线分隔;")])]),t._v(" "),a("h2",{attrs:{id:"数据库规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库规范")]),t._v(" "),a("p",[t._v("推荐 3 篇文章, 虽然是 mysql 的, 但是都是数据库啊")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651960775&idx=1&sn=1a9c9f4b94dfe71ad2528fb2c84f5ec7&chksm=bd2d001b8a5a890d302d139ea42e9ffde44407738a618865934e40b8e35486b13cafca2933f6&mpshare=1&scene=1&srcid=1228MzgFw9KLVzaHtjHvpb2p%23rd",target:"_blank",rel:"noopener noreferrer"}},[t._v("赶集 mysql 军规"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959906&idx=1&sn=2cbdc66cfb5b53cf4327a1e0d18d9b4a&chksm=bd2d07be8a5a8ea86dc3c04eced3f411ee5ec207f73d317245e1fefea1628feb037ad71531bc&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[t._v("58到家数据库30条军规解读"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959910&idx=1&sn=6b6853b70dbbe6d689a12a4a60b84d8b&chksm=bd2d07ba8a5a8eac6783bac951dba345d865d875538755fe665a5daaf142efe670e2c02b7c71&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[t._v("再议数据库军规"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"配置规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置规范")]),t._v(" "),a("p",[t._v("为了解决开发, 测试, 现网部署时手动对比配置, 手动切换配置, 减少人工介入出错的几率, 节约时间等问题, "),a("code",[t._v("musicsearch-project")]),t._v(" 采用多环境配置.\n一次打包,可部署到多个环境.")]),t._v(" "),a("p",[t._v("意思就是: 一次打包, 到处运行.")]),t._v(" "),a("h3",{attrs:{id:"配置分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置分类","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置分类")]),t._v(" "),a("p",[a("strong",[t._v("从数据来源可分为:")])]),t._v(" "),a("ul",[a("li",[t._v("数据库")]),t._v(" "),a("li",[t._v("NoSQL")]),t._v(" "),a("li",[t._v("文件")]),t._v(" "),a("li",[t._v("网络")])]),t._v(" "),a("p",[a("strong",[t._v("从加载顺序上课分为:")])]),t._v(" "),a("ul",[a("li",[t._v("启动时加载的配置\n"),a("ul",[a("li",[t._v("dataSource 连接配置")]),t._v(" "),a("li",[t._v("Redis 连接配置")]),t._v(" "),a("li",[t._v("MQ 连接配置")]),t._v(" "),a("li",[t._v("日志配置")]),t._v(" "),a("li",[t._v("...")])])]),t._v(" "),a("li",[t._v("运行期间动态获取\n"),a("ul",[a("li",[t._v("字典数据")])])])]),t._v(" "),a("p",[t._v("其实最容易出错的且影响最大的就是运行期间动态获取的配置, 字典数据改错了就会影响现网业务, 而且不好排查.\n连接配置启动时就需要, 如果错误可能会导致启动失败, 这类问题比较容易排查.")]),t._v(" "),a("h3",{attrs:{id:"local-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-环境","aria-hidden":"true"}},[t._v("#")]),t._v(" local 环境")]),t._v(" "),a("p",[t._v("以前在开发时, 使用的 dev 环境. 可能会将某几个配置修改成本地环境或者 test 环境进行开发, 开发完成后, 又"),a("code",[t._v("需要逐个改回来")]),t._v(";\n改动的配置太多, 部分配置"),a("code",[t._v("忘记改回来")]),t._v("还提交了, 悲剧了;")]),t._v(" "),a("p",[t._v("local 环境专门解决以上问题.\n最初是一个空配置, 我们拉取代码后根据自己的环境修改 local 配置, 然后使用 idea "),a("code",[t._v("忽略提交")]),t._v("功能, 忽略此文件.\n每个开发者互不影响, 开发时只需要修改 local 环境即可, "),a("code",[t._v("不该")]),t._v(" 直接修改其他环境配置, 避免环境问题造成线上问题")]),t._v(" "),a("h3",{attrs:{id:"dev-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dev-环境","aria-hidden":"true"}},[t._v("#")]),t._v(" dev 环境")]),t._v(" "),a("p",[t._v("现在的服务太多, 我们开发时不可能每个都启动起来, 这时我们可以将一些公共的服务部署到 dev 服务器, 这个配置就是 dev 环境的配置了, 一旦配置好, "),a("code",[t._v("不该")]),t._v(" 轻易修改.")]),t._v(" "),a("h3",{attrs:{id:"test-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#test-环境","aria-hidden":"true"}},[t._v("#")]),t._v(" test 环境")]),t._v(" "),a("p",[t._v("和 dev 环境差不多, 只是一些连接配置不一样, "),a("code",[t._v("不该")]),t._v(" 轻易修改.")]),t._v(" "),a("h3",{attrs:{id:"prod-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prod-环境","aria-hidden":"true"}},[t._v("#")]),t._v(" prod 环境")]),t._v(" "),a("p",[t._v("生产环境经常改动的就是字典数据, 现在的字段数据太复杂了.")]),t._v(" "),a("p",[t._v("最好的方式是通过 kv 键值对, value 只是简单的字符串而已, 不要是一个复杂的 json, 这样能非常友好的管理所有配置, 修改配置也不容易出错.")]),t._v(" "),a("p",[t._v("redis 构建工具我了解当的一个作用是为了防止修改出错, 做了一个保护措施.\n先保存到数据库中, 检查一下, 确保没出错后使用构建工具同步到 redis.")]),t._v(" "),a("p",[t._v("如果是这个原因的话, 我想能不能使用一个弹出框显示修改前与修改后的值, 然后二次确认?\n确认后修改数据库, 同时更新 redis.")]),t._v(" "),a("p",[t._v("获取动态数据的方式:")]),t._v(" "),a("p",[t._v("首先从 redis 中获取, 如果没有则从数据库中获取, 然后更新到 redis;\n如果有则直接返回.")]),t._v(" "),a("p",[t._v("后台系统修改字典数据且二次确认后, 更新数据库和 redis.")]),t._v(" "),a("p",[t._v("这里有一个事务问题.\n比如后台系统修改完字段数据后,更新数据库成功, 但是更新 redis 失败, 这个时候 redis 中就是旧数据.")]),t._v(" "),a("p",[a("strong",[t._v("解决方案:")])]),t._v(" "),a("ol",[a("li",[t._v("后台系统二次确认修改;")]),t._v(" "),a("li",[t._v("更新数据库;")]),t._v(" "),a("li",[t._v("将 redis 相应的 key 设置为失效;")])]),t._v(" "),a("p",[a("strong",[t._v("分析:")])]),t._v(" "),a("ol",[a("li",[t._v("第 2 步失败, 直接返回修改失败, 不会发生事务问题, 数据也不会被修改;")]),t._v(" "),a("li",[t._v("第 2 步成功, 第 3 步失败;\n"),a("ol",[a("li",[t._v("此时应用查询字典数据时, redis 为旧数据(可以使用重试来解决)")])])]),t._v(" "),a("li",[t._v("第 2 步成功, 第 3 步成功;\n"),a("ol",[a("li",[t._v("此时应用查询字典数据时, redis 没有, 则去数据库中查询最新, 然后再更新到 redis 中.")])])])]),t._v(" "),a("h3",{attrs:{id:"dubbo-配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dubbo-配置文件","aria-hidden":"true"}},[t._v("#")]),t._v(" Dubbo 配置文件")]),t._v(" "),a("blockquote",[a("p",[t._v("消费者配置文件名 "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v("dubbo-consumer-服务名.xml")]),t._v(" 命名.\n服务提供者配置文件名 "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v("dubbo-provider-服务名.xml")]),t._v(" 命名.")])]),t._v(" "),a("p",[t._v("配置名区分消费者和生产者, 这样职责明确, 方便搜索查看. 最操蛋的是搜索出几十个 dubbo.xml 配置, 还得一个个点进入看是消费者还是生产者配置.")]),t._v(" "),a("blockquote",[a("p",[t._v("消费者配置 "),a("code",[t._v("必须")]),t._v(" 单独写在 "),a("code",[t._v("dubbo-consumer-服务名.xml")]),t._v(" 中, 不要写在  Spring 配置中.")])]),t._v(" "),a("p",[t._v("配置尽量分开到不同到配置文件中, 最后使用 import 聚合起来. 需要修改配置时, 能明确知道去哪个配置文件中修改.\n你见 "),a("code",[t._v("葵花宝典")]),t._v(" 里面写了怎么自宫的详细教程吗? 最多也就引用一下, "),a("code",[t._v("欲练此功, 必先自宫")]),t._v(".")]),t._v(" "),a("blockquote",[a("p",[t._v("引入配置不要写在 web.xml, "),a("code",[t._v("必须")]),t._v(" 使用 import 在 Spring 主配置文件中引入.")])]),t._v(" "),a("p",[a("code",[t._v("musicsearch-project")]),t._v(" 不需要担心这个问题, 因为 web.xml 已经被干掉了 🤣")]),t._v(" "),a("h3",{attrs:{id:"spring-配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-配置文件","aria-hidden":"true"}},[t._v("#")]),t._v(" Spring 配置文件")]),t._v(" "),a("ul",[a("li",[t._v("SpringMVC 配置文件统一命名: "),a("code",[t._v("spring-mvc.xml")])]),t._v(" "),a("li",[t._v("Web 应用的 Spring 配置文件统一命名: "),a("code",[t._v("spring-context.xml")])]),t._v(" "),a("li",[t._v("其他组件的 Spring 配置文件统一命名: 模块名.xml")]),t._v(" "),a("li",[t._v("Spring Boot 应用的配置文件统一使用 application.properties")])]),t._v(" "),a("p",[a("code",[t._v("musicsearch-project")]),t._v(" 使用 Spring Boot 为基础框架, 因此 "),a("code",[t._v("spring-mvc.xml")]),t._v(" 和 "),a("code",[t._v("spring-context.xml")]),t._v(" 已经使用 Java Config 的方式代替.")]),t._v(" "),a("p",[a("strong",[t._v("自动配置类 "),a("code",[t._v("必须")]),t._v(" 以 服务名+Configuration 方式命名")]),t._v(" "),a("strong",[t._v("启动类 "),a("code",[t._v("必须")]),t._v(" 以 服务名+Application 方式命名")]),t._v(" "),a("strong",[t._v("单元测试主类 "),a("code",[t._v("必须")]),t._v(" 以 服务名+ApplicationTest 方式命名")])]),t._v(" "),a("h2",{attrs:{id:"maven"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven","aria-hidden":"true"}},[t._v("#")]),t._v(" Maven")]),t._v(" "),a("p",[t._v("原来的项目是由多个模块由不同的 Maven 管理, 造成编译,打包,debug 麻烦, 依赖关系复杂, 版本随意, 同一个模块多个不同版本, 维护困难.")]),t._v(" "),a("p",[t._v("为了解决以上问题, 现在将所有模块通过一个 主 pom 进行管理, 所有模块全部在 "),a("code",[t._v("musicsearch-porject")]),t._v(" 目录下.")]),t._v(" "),a("p",[t._v("优点如下:")]),t._v(" "),a("ul",[a("li",[t._v("debug 时方便, 想在哪儿打断点就在哪儿打断点. 随处 debug;")]),t._v(" "),a("li",[t._v("能借助 IDEA 进行全局重构;")]),t._v(" "),a("li",[t._v("jar 版本统一管理")]),t._v(" "),a("li",[t._v("绝对不会出现相同 jar 多个相同版本的问题.")])]),t._v(" "),a("h3",{attrs:{id:"pom-规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-规范","aria-hidden":"true"}},[t._v("#")]),t._v(" pom 规范")]),t._v(" "),a("blockquote",[a("p",[t._v("groupId "),a("code",[t._v("必须")]),t._v(" 为 "),a("code",[t._v("com.iflytek")]),t._v("\nartifactId "),a("code",[t._v("必须")]),t._v(" 与 模块名相同\nversion "),a("code",[t._v("必须")]),t._v(" 与 父 pom version 相同\n"),a("code",[t._v("必须")]),t._v(" 显式指定 "),a("code",[t._v("packaging")])])]),t._v(" "),a("p",[t._v("如果没有设置 packaging 标签, 默认打包为 jar 格式, 这里 "),a("code",[t._v("必须")]),t._v(" 设置此标签, 明确指定打包格式.")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 写 "),a("code",[t._v("description")]),t._v(" 标签")])]),t._v(" "),a("p",[t._v("为此 pom 添加必要的描述信息")]),t._v(" "),a("blockquote",[a("p",[t._v("第三方依赖 "),a("code",[t._v("必须")]),t._v(" 添加到 "),a("code",[t._v("musicsearch-dependencies")]),t._v(" pom 中;\n如果 Maven 中央仓库没有的 jar 包, 从网上下载后, "),a("code",[t._v("必须")]),t._v(" 上传到公司的 Maven, 不能直接使用 jar 包")])]),t._v(" "),a("ol",[a("li",[t._v("搜索 Maven 中央仓库, 关键字 + maven;")]),t._v(" "),a("li",[t._v("搜索不到则找到 jar 上传到公司 Maven 仓库")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 安装到私服 \n# DgroupId和DartifactId构成了该jar包在pom.xml的坐标, 项目就是依靠这两个属性定位. 自己起名字也行.  \n# Dfile表示需要上传的jar包的绝对路径.  \n# Durl私服上仓库的位置, 打开nexus——>repositories菜单, 可以看到该路径.  \n# DrepositoryId服务器的表示id, 在nexus的configuration可以看到.  要与 setting.xml 中的权限 id 一致\n# Dversion表示版本信息\nmvn deploy:deploy-file -DgroupId=com.xxx -DartifactId=yyy -Dversion=x.x.x -Dpackaging=jar -Dfile=jar-path -Durl=上传地址 -DrepositoryId=thirdparty \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("第三方依赖 "),a("code",[t._v("必须")]),t._v(" 将版本迁入 "),a("code",[t._v("musicsearch-dependencies")]),t._v(" 到 properties 标签下;\nversion "),a("code",[t._v("必须")]),t._v(" 以 "),a("code",[t._v("artifactId.version")]),t._v(" 的方式命名;")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    ...\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("socket.io-client.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("socket.io-client.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencyManagement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        ...\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io.socket"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("socket.io-client"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${socket.io-client.version}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencyManagement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("由于 "),a("code",[t._v("musicsearch-project")]),t._v(" 使用 Spring Boot 开发, 版本为 1.5.8.RELEASE.\nSpring Boot 每个版本都有一个 "),a("code",[t._v("spring-boot-dependencies")]),t._v(" 项目用来维护所有第三方 jar 版本和 Maven 插件版本.")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15330921723159.jpg",alt:"-w1087"}})]),t._v(" "),a("p",[t._v("我们直接使用 "),a("code",[t._v("spring-boot-dependencies")]),t._v(" 中相关依赖的版本, 能有效减少版本冲突.")]),t._v(" "),a("blockquote",[a("p",[t._v("如果我们新增的第三方包已经在 "),a("code",[t._v("spring-boot-dependencies")]),t._v(" 声明, 则 "),a("code",[t._v("必须")]),t._v(" 使用 "),a("code",[t._v("spring-boot-dependencies")]),t._v(" 规定的版本, 即删除 version 标签.")])]),t._v(" "),a("p",[t._v("怎么查看新引入的依赖是否在 "),a("code",[t._v("spring-boot-dependencies")]),t._v(" 被声明了呢, 很简单")]),t._v(" "),a("p",[t._v("比如我需要添加如下依赖到模块中")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.projectlombok"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("lombok"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.16.14"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("整个操作如下图所示:")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-08-01%2011.03.20.gif",alt:"2018-08-01 11.03.20"}})]),t._v(" "),a("p",[t._v("我们新增的 lombok 版本为 1.16.14\n但是当加入 pom 之后, 左边出现了一个向上的箭头, 点过去之后, 发现此依赖已经在 "),a("code",[t._v("spring-boot-dependencies")]),t._v(" 被声明了, 并且版本为 1.16.18, 因此删除 version 就可以了.")]),t._v(" "),a("p",[a("strong",[t._v("添加新依赖的步骤:")])]),t._v(" "),a("ol",[a("li",[t._v("选择合适的模块, 直接粘贴 maven 依赖配置到 pom 中,")]),t._v(" "),a("li",[t._v("如果左边出现了向上的箭头, 则删除 version 标签, 搞定;")]),t._v(" "),a("li",[t._v("如果没有, 则将此依赖配置粘贴到 "),a("code",[t._v("musicsearch-dependencies")]),t._v(" 中, 将 version 添加到 properties 标签中;")]),t._v(" "),a("li",[t._v("最后删除最开始那个配置的 version;")])]),t._v(" "),a("p",[a("code",[t._v("spring-boot-dependencies")]),t._v(" 不可能定义到所有的依赖, 因此这里就有了 "),a("code",[t._v("musicsearch-dependencies")]),t._v(" 这个模块, 用来管理项目需要但是没有在 "),a("code",[t._v("spring-boot-dependencies")]),t._v(" 中定义的 jar 依赖.")]),t._v(" "),a("h2",{attrs:{id:"日志规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 日志规范")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("推荐")]),t._v(" 使用 "),a("code",[t._v("@Slf4j")]),t._v(" 获取 "),a("code",[t._v("log")]),t._v(" 实例")])]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("lombok")]),t._v(" 插件, 直接使用 @Slf4j 代替获取 log 实例的冗余代码.")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("slf4j")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("slf4j")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" log "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Xxx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("blockquote",[a("p",[a("code",[t._v("必须")]),t._v(" 使用 "),a("code",[t._v("log4j2")]),t._v(" 日志框架")])]),t._v(" "),a("p",[t._v("统一使用效率更高的 log4j2 日志框架")]),t._v(" "),a("blockquote",[a("p",[t._v("日志输出到文件的编码 "),a("code",[t._v("必须")]),t._v(" 为 UTF-8")])]),t._v(" "),a("h3",{attrs:{id:"日志配置名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志配置名","aria-hidden":"true"}},[t._v("#")]),t._v(" 日志配置名")]),t._v(" "),a("blockquote",[a("p",[t._v("Web 应用或者通过 JVM 进程提供服务的应用, "),a("code",[t._v("必须")]),t._v(" 使用 "),a("code",[t._v("log4j2-spring.xml")]),t._v(" 命名")])]),t._v(" "),a("p",[t._v("Spring Boot 官方推荐优先使用带有 -spring 的文件名作为日志配置（如使用 log4j2-spring.xml, 而不是 log4j2.xml）")]),t._v(" "),a("p",[t._v("原理可以查看")]),t._v(" "),a("p",[a("code",[t._v("Log4J2LoggingSystem.getCurrentlySupportedConfigLocations()")]),t._v(" "),a("code",[t._v("AbstractLoggingSystem.getSpringConfigLocations()")])]),t._v(" "),a("h3",{attrs:{id:"输出样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输出样式","aria-hidden":"true"}},[t._v("#")]),t._v(" 输出样式")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("env: %d{yyyy.MM.dd HH:mm:ss.SSS} [%5p] ${sys:PID} -- [%15.15t] %-40.40c{1.} : %m%n%xwEx\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("输出内容元素具体如下:")]),t._v(" "),a("ul",[a("li",[t._v("环境名")]),t._v(" "),a("li",[t._v("时间日期 — 精确到毫秒")]),t._v(" "),a("li",[t._v("日志级别 — ERROR, WARN, INFO, DEBUG or TRACE")]),t._v(" "),a("li",[t._v("进程ID")]),t._v(" "),a("li",[t._v("分隔符 — "),a("code",[t._v("--")]),t._v(" 标识实际日志的开始")]),t._v(" "),a("li",[t._v("线程名 — 方括号括起来（可能会截断控制台输出）")]),t._v(" "),a("li",[t._v("Logger名 — 通常使用源代码的类名")]),t._v(" "),a("li",[t._v("日志内容")])]),t._v(" "),a("p",[t._v("效果 :")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("dev: 2018.08.01 15:02:25.153  INFO 75012 -- [  restartedMain] c.i.m.m.MeetingApplication : Starting MeetingApplication on dong4j with PID 75012 (/Users/codeai/Develop/work/ifly/musicsearch-project/musicsearch-business/service-meeting/target/classes started by codeai in /Users/codeai/Develop/work/ifly/musicsearch-project)\ndev: 2018.08.01 15:02:25.154 DEBUG 75012 -- [  restartedMain] c.i.m.m.MeetingApplication : Running with Spring Boot v1.5.8.RELEASE, Spring v4.3.12.RELEASE\ndev: 2018.08.01 15:02:25.155  INFO 75012 -- [  restartedMain] c.i.m.m.MeetingApplication : The following profiles are active: oracle\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"日志保存路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志保存路径","aria-hidden":"true"}},[t._v("#")]),t._v(" 日志保存路径")]),t._v(" "),a("p",[t._v("日志路径统一管理, 确保每台服务器上的日志都在同一目录下")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<property name="LOG_BASE_FOLDER">/path/to/logs/${APP_NAME}</property>\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("code",[t._v("/path/to/logs/")]),t._v(" 再议, 只要是一个有读写权限的目录且好记就可以了, 关键是保持统一.")]),t._v(" "),a("blockquote",[a("p",[t._v("最后 "),a("code",[t._v("必须")]),t._v(" 通过 APP_NAME 参数区分应用.")])]),t._v(" "),a("h3",{attrs:{id:"日志归档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志归档","aria-hidden":"true"}},[t._v("#")]),t._v(" 日志归档")]),t._v(" "),a("blockquote",[a("p",[t._v("日志文件 "),a("code",[t._v("必须")]),t._v(" 1 天归档一次, 压缩文件上限 "),a("code",[t._v("建议")]),t._v(" 为 200MB")])]),t._v(" "),a("p",[t._v("每天归档日志, 方便按日志查询日志")]),t._v(" "),a("h2",{attrs:{id:"单元测试规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单元测试规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 单元测试规范")]),t._v(" "),a("blockquote",[a("p",[t._v("所有模块都 "),a("code",[t._v("必须")]),t._v(" 有单元测试, 而不是使用 "),a("code",[t._v("main()")]),t._v(" 来进行测试;")])]),t._v(" "),a("p",[t._v("IDEA 添加单元测试类非常简单")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-2018-07-31%2000.15.33.gif",alt:"2018-07-31 00.15.33"}})]),t._v(" "),a("p",[t._v("直接通过快捷键自动生成单元测试类.")]),t._v(" "),a("blockquote",[a("p",[t._v("集成测试时, "),a("code",[t._v("必须")]),t._v(" 继承主测试类;")])]),t._v(" "),a("p",[t._v("在每个 Web 模块中, 都会有一个 XxxApplicationTest 测试父类, 用于整合配置类, 测试端口随机等功能.")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329680004537.jpg",alt:"-w983"}})]),t._v(" "),a("p",[t._v("其他集成测试类只需要继承此父类即可, 不需要写重复的注解")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://qiniu.dong4j.info/2019-07-03-15329681167623.jpg",alt:"-w983"}})]),t._v(" "),a("p",[t._v("默认是单元测试 "),a("code",[t._v("必须")]),t._v(" 全部通过才能打包, 当往往由于单元测试编写不规范造成打包失败, 编写好的单元测试难度也非常大, 因此这里不强制要求.")]),t._v(" "),a("p",[t._v("使用 3 种方式忽略单元测试")]),t._v(" "),a("p",[a("strong",[t._v("方式1:")])]),t._v(" "),a("p",[a("code",[t._v("推荐")]),t._v(" 这种")]),t._v(" "),a("p",[t._v("使用变量")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("maven.test.skip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("maven.test.skip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("或者")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("skipTests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("skipTests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[a("strong",[t._v("方式2:")])]),t._v(" "),a("p",[t._v("使用 mvn 命令")]),t._v(" "),a("div",{staticClass:"language-lua line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-lua"}},[a("code",[t._v("mvn package "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Dmaven"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("skip"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("true")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("方式3:")])]),t._v(" "),a("p",[t._v("使用插件")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.maven.plugins"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("maven-surefire-plugin"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${maven-surefire-plugin.version}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("skipTests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("true"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("skipTests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("方式1 与方式2 的区别在于:")]),t._v(" "),a("p",[a("code",[t._v("skipTests")]),t._v(" 不执行测试用例, 但编译测试用例类生成相应的 class 文件至 target/test-classes 下\n"),a("code",[t._v("maven.test.skip")]),t._v(" 不但跳过单元测试的运行, 也跳过测试代码的编译")])])},[],!1,null,null,null);s.default=e.exports}}]);