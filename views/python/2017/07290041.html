<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python 面向对象(进阶篇) | Black House</title>
    <meta name="description" content="代码千万行, 注释第一行, 编码不规范, 同事两行泪.">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.35477964.css" as="style"><link rel="preload" href="/assets/js/app.23d4d300.js" as="script"><link rel="preload" href="/assets/js/4.28fd9624.js" as="script"><link rel="preload" href="/assets/js/1.928d15b1.js" as="script"><link rel="preload" href="/assets/js/82.e98222ae.js" as="script"><link rel="prefetch" href="/assets/js/10.c2349238.js"><link rel="prefetch" href="/assets/js/100.031b764c.js"><link rel="prefetch" href="/assets/js/11.597103f4.js"><link rel="prefetch" href="/assets/js/12.01e326a5.js"><link rel="prefetch" href="/assets/js/13.6937eabc.js"><link rel="prefetch" href="/assets/js/14.0e95ab13.js"><link rel="prefetch" href="/assets/js/15.43c0e778.js"><link rel="prefetch" href="/assets/js/16.8c75ae64.js"><link rel="prefetch" href="/assets/js/17.02d12878.js"><link rel="prefetch" href="/assets/js/18.6b597676.js"><link rel="prefetch" href="/assets/js/19.524d893b.js"><link rel="prefetch" href="/assets/js/20.11686f52.js"><link rel="prefetch" href="/assets/js/21.ad025f0d.js"><link rel="prefetch" href="/assets/js/22.dca96777.js"><link rel="prefetch" href="/assets/js/23.121a28ab.js"><link rel="prefetch" href="/assets/js/24.99537c05.js"><link rel="prefetch" href="/assets/js/25.8f31fa14.js"><link rel="prefetch" href="/assets/js/26.a121c6cc.js"><link rel="prefetch" href="/assets/js/27.a57ec579.js"><link rel="prefetch" href="/assets/js/28.3f009b45.js"><link rel="prefetch" href="/assets/js/29.9c269e5b.js"><link rel="prefetch" href="/assets/js/30.168f09f3.js"><link rel="prefetch" href="/assets/js/31.ed454542.js"><link rel="prefetch" href="/assets/js/32.5f77ac76.js"><link rel="prefetch" href="/assets/js/33.3b921274.js"><link rel="prefetch" href="/assets/js/34.2e2dd8bc.js"><link rel="prefetch" href="/assets/js/35.457382a4.js"><link rel="prefetch" href="/assets/js/36.097474f8.js"><link rel="prefetch" href="/assets/js/37.2914dab3.js"><link rel="prefetch" href="/assets/js/38.bd900eff.js"><link rel="prefetch" href="/assets/js/39.00b0bb76.js"><link rel="prefetch" href="/assets/js/40.6d5aae82.js"><link rel="prefetch" href="/assets/js/41.e00929aa.js"><link rel="prefetch" href="/assets/js/42.b0c12805.js"><link rel="prefetch" href="/assets/js/43.7a60ce77.js"><link rel="prefetch" href="/assets/js/44.adf74ab9.js"><link rel="prefetch" href="/assets/js/45.36b6b8e2.js"><link rel="prefetch" href="/assets/js/46.a254f56a.js"><link rel="prefetch" href="/assets/js/47.aec9ad68.js"><link rel="prefetch" href="/assets/js/48.e3477ba7.js"><link rel="prefetch" href="/assets/js/49.5d974cde.js"><link rel="prefetch" href="/assets/js/5.c7e63593.js"><link rel="prefetch" href="/assets/js/50.c71471a2.js"><link rel="prefetch" href="/assets/js/51.de15920e.js"><link rel="prefetch" href="/assets/js/52.1eabf9c1.js"><link rel="prefetch" href="/assets/js/53.ada4082c.js"><link rel="prefetch" href="/assets/js/54.985c146e.js"><link rel="prefetch" href="/assets/js/55.33da5078.js"><link rel="prefetch" href="/assets/js/56.8b899006.js"><link rel="prefetch" href="/assets/js/57.f7ea6441.js"><link rel="prefetch" href="/assets/js/58.55ca22b7.js"><link rel="prefetch" href="/assets/js/59.3b16a882.js"><link rel="prefetch" href="/assets/js/6.8843ac12.js"><link rel="prefetch" href="/assets/js/60.7365ec6c.js"><link rel="prefetch" href="/assets/js/61.0508510a.js"><link rel="prefetch" href="/assets/js/62.8c3a0bf0.js"><link rel="prefetch" href="/assets/js/63.99503945.js"><link rel="prefetch" href="/assets/js/64.1193b17d.js"><link rel="prefetch" href="/assets/js/65.40a7b476.js"><link rel="prefetch" href="/assets/js/66.c95c74fb.js"><link rel="prefetch" href="/assets/js/67.dcc1ce00.js"><link rel="prefetch" href="/assets/js/68.e8aeba6d.js"><link rel="prefetch" href="/assets/js/69.13b69234.js"><link rel="prefetch" href="/assets/js/7.cda98f34.js"><link rel="prefetch" href="/assets/js/70.2308210c.js"><link rel="prefetch" href="/assets/js/71.bdac7c88.js"><link rel="prefetch" href="/assets/js/72.d5e7dabc.js"><link rel="prefetch" href="/assets/js/73.f1cec72d.js"><link rel="prefetch" href="/assets/js/74.13cbda62.js"><link rel="prefetch" href="/assets/js/75.5ec77696.js"><link rel="prefetch" href="/assets/js/76.e80c98fb.js"><link rel="prefetch" href="/assets/js/77.edf10bf3.js"><link rel="prefetch" href="/assets/js/78.9472aec2.js"><link rel="prefetch" href="/assets/js/79.2f59f6d2.js"><link rel="prefetch" href="/assets/js/8.64e66a3d.js"><link rel="prefetch" href="/assets/js/80.9d9b311d.js"><link rel="prefetch" href="/assets/js/81.112c831f.js"><link rel="prefetch" href="/assets/js/83.a7741563.js"><link rel="prefetch" href="/assets/js/84.47f9ec86.js"><link rel="prefetch" href="/assets/js/85.4b288089.js"><link rel="prefetch" href="/assets/js/86.d01d1b2a.js"><link rel="prefetch" href="/assets/js/87.26f71539.js"><link rel="prefetch" href="/assets/js/88.0cdca4ad.js"><link rel="prefetch" href="/assets/js/89.fca9f86b.js"><link rel="prefetch" href="/assets/js/9.8fcc4a9b.js"><link rel="prefetch" href="/assets/js/90.49e1e9ad.js"><link rel="prefetch" href="/assets/js/91.58ec2d07.js"><link rel="prefetch" href="/assets/js/92.0da2a72c.js"><link rel="prefetch" href="/assets/js/93.9d312aaf.js"><link rel="prefetch" href="/assets/js/94.e94db684.js"><link rel="prefetch" href="/assets/js/95.ed2aa34a.js"><link rel="prefetch" href="/assets/js/96.6a2e264d.js"><link rel="prefetch" href="/assets/js/97.8a055f18.js"><link rel="prefetch" href="/assets/js/98.1284385e.js"><link rel="prefetch" href="/assets/js/99.830ddc7a.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.3ceaf8af.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35477964.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/head.png" alt="Black House" class="logo"> <span class="site-name">Black House</span></a> <div class="links"><div class="color-picker"><a href="#" class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/Design.html" class="nav-link"><i class="iconfont undefined"></i>
  Design
</a></li><li class="dropdown-item"><!----> <a href="/category/Framework.html" class="nav-link"><i class="iconfont undefined"></i>
  Framework
</a></li><li class="dropdown-item"><!----> <a href="/category/Spring.html" class="nav-link"><i class="iconfont undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/category/Issue.html" class="nav-link"><i class="iconfont undefined"></i>
  Issue
</a></li><li class="dropdown-item"><!----> <a href="/category/Java.html" class="nav-link"><i class="iconfont undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/category/Mac.html" class="nav-link"><i class="iconfont undefined"></i>
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/category/Other.html" class="nav-link"><i class="iconfont undefined"></i>
  Other
</a></li><li class="dropdown-item"><!----> <a href="/category/Middleware.html" class="nav-link"><i class="iconfont undefined"></i>
  Middleware
</a></li><li class="dropdown-item"><!----> <a href="/category/NoSQL.html" class="nav-link"><i class="iconfont undefined"></i>
  NoSQL
</a></li><li class="dropdown-item"><!----> <a href="/category/Python.html" class="nav-link"><i class="iconfont undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/category/Tools.html" class="nav-link"><i class="iconfont undefined"></i>
  Tools
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dong4j" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/category/Design.html" class="nav-link"><i class="iconfont undefined"></i>
  Design
</a></li><li class="dropdown-item"><!----> <a href="/category/Framework.html" class="nav-link"><i class="iconfont undefined"></i>
  Framework
</a></li><li class="dropdown-item"><!----> <a href="/category/Spring.html" class="nav-link"><i class="iconfont undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/category/Issue.html" class="nav-link"><i class="iconfont undefined"></i>
  Issue
</a></li><li class="dropdown-item"><!----> <a href="/category/Java.html" class="nav-link"><i class="iconfont undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/category/Mac.html" class="nav-link"><i class="iconfont undefined"></i>
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/category/Other.html" class="nav-link"><i class="iconfont undefined"></i>
  Other
</a></li><li class="dropdown-item"><!----> <a href="/category/Middleware.html" class="nav-link"><i class="iconfont undefined"></i>
  Middleware
</a></li><li class="dropdown-item"><!----> <a href="/category/NoSQL.html" class="nav-link"><i class="iconfont undefined"></i>
  NoSQL
</a></li><li class="dropdown-item"><!----> <a href="/category/Python.html" class="nav-link"><i class="iconfont undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/category/Tools.html" class="nav-link"><i class="iconfont undefined"></i>
  Tools
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/dong4j" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python 面向对象(进阶篇)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/python/2017/07290041.html#类的成员" class="sidebar-link">类的成员</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/python/2017/07290041.html#字段" class="sidebar-link">字段</a></li><li class="sidebar-sub-header"><a href="/views/python/2017/07290041.html#方法" class="sidebar-link">方法</a></li><li class="sidebar-sub-header"><a href="/views/python/2017/07290041.html#属性" class="sidebar-link">属性</a></li><li class="sidebar-sub-header"><a href="/views/python/2017/07290041.html#类成员的修饰符" class="sidebar-link">类成员的修饰符</a></li><li class="sidebar-sub-header"><a href="/views/python/2017/07290041.html#类的特殊成员" class="sidebar-link">类的特殊成员</a></li></ul></li><li><a href="/views/python/2017/07290041.html#创建类就可以有两种方式" class="sidebar-link">创建类就可以有两种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/python/2017/07290041.html#普通方式" class="sidebar-link">普通方式</a></li><li class="sidebar-sub-header"><a href="/views/python/2017/07290041.html#特殊方式（type类的构造函数）" class="sidebar-link">特殊方式（type类的构造函数）</a></li></ul></li></ul></section></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>Python 面向对象(进阶篇)</h1> <hr> <div data-v-0b496ca7><i class="iconfont reco-account" data-v-0b496ca7><span data-v-0b496ca7>dong4j</span></i> <i class="iconfont reco-date" data-v-0b496ca7><span data-v-0b496ca7>7/29/2017</span></i> <!----> <i class="iconfont reco-tag tags" data-v-0b496ca7><span class="tag-item" data-v-0b496ca7>
      Python
    </span></i></div></div> <div class="content__default"><div class="tip custom-block"><p>Python 面向对象进阶部分</p></div> <p>原文出处:  <a href="http://www.cnblogs.com/wupeiqi/p/4766801.html" target="_blank" rel="noopener noreferrer">武沛齐 cnblog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>面向对象是一种编程方式, 此编程方式的实现是基于对 <strong>类</strong> 和 <strong>对象</strong> 的使用</li> <li>类 是一个模板, 模板中包装了多个“函数”供使用（可以讲多函数中公用的变量封装到对象中）</li> <li>对象, 根据模板创建的实例（即: 对象）, 实例用于调用被包装在类中的函数</li> <li>面向对象三大特性: 封装、继承和多态</li></ul> <p>本篇将详细介绍Python 类的成员、成员修饰符、类的特殊成员.</p> <h2 id="类的成员"><a href="#类的成员" aria-hidden="true" class="header-anchor">#</a> 类的成员</h2> <p>类的成员可以分为三大类: 字段、方法和属性</p> <p><a href="http://qiniu.dong4j.info/2019-07-02-47fc46f7af5baa52756982ad23b11ded.png" target="_blank" rel="noopener noreferrer"><img src="http://qiniu.dong4j.info/2019-07-02-47fc46f7af5baa52756982ad23b11ded.png" alt="ptyhonoo1"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>*注: 所有成员中, 只有普通字段的内容保存对象中, 即: 根据此类创建了多少对象, 在内存中就有多少个普通字段. 而其他的成员, 则都是保存在类中, 即: 无论对象的多少, 在内存中只创建一份. *</p> <h3 id="字段"><a href="#字段" aria-hidden="true" class="header-anchor">#</a> 字段</h3> <p>字段包括: 普通字段和静态字段, 他们在定义和使用中有所区别, 而最本质的区别是内存中保存的位置不同,</p> <ul><li>普通字段属于<strong>对象</strong></li> <li>静态字段属于<strong>类</strong></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Province</span><span class="token punctuation">:</span>
 
    <span class="token comment"># 静态字段</span>
    country ＝ <span class="token string">'中国'</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
 
        <span class="token comment"># 普通字段</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
 
<span class="token comment"># 直接访问普通字段</span>
obj <span class="token operator">=</span> Province<span class="token punctuation">(</span><span class="token string">'河北省'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> obj<span class="token punctuation">.</span>name
 
<span class="token comment"># 直接访问静态字段</span>
Province<span class="token punctuation">.</span>country
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="字段的定义和使用"><a href="#字段的定义和使用" aria-hidden="true" class="header-anchor">#</a> 字段的定义和使用</h4> <p>由上述代码可以看出【普通字段需要通过对象来访问】【静态字段通过类访问】, 在使用上可以看出普通字段和静态字段的归属是不同的. 其在内容的存储方式类似如下图:</p> <p><a href="http://qiniu.dong4j.info/2019-07-02-a8598a63dc053a4ac4c73091a5e73916.jpg" target="_blank" rel="noopener noreferrer"><img src="http://qiniu.dong4j.info/2019-07-02-a8598a63dc053a4ac4c73091a5e73916.jpg" alt="ptyhonoo2"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>由上图可是:</p> <ul><li>静态字段在内存中只保存一份</li> <li>普通字段在每个对象中都要保存一份</li></ul> <p>应用场景:  通过类创建对象时, 如果每个对象都具有相同的字段, 那么就使用静态字段</p> <h3 id="方法"><a href="#方法" aria-hidden="true" class="header-anchor">#</a> 方法</h3> <p>方法包括: 普通方法、静态方法和类方法, 三种方法在<strong>内存中都归属于类</strong>, 区别在于调用方式不同.</p> <ul><li>普通方法: 由<strong>对象</strong>调用；至少一个<strong>self</strong>参数；执行普通方法时, 自动将调用该方法的<strong>对象</strong>赋值给<strong>self</strong>；</li> <li>类方法: 由<strong>类</strong>调用； 至少一个<strong>cls</strong>参数；执行类方法时, 自动将调用该方法的<strong>类</strong>复制给<strong>cls</strong>；</li> <li>静态方法: 由<strong>类</strong>调用；无默认参数；</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
 
    <span class="token keyword">def</span> <span class="token function">ord_func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot; 定义普通方法, 至少有一个self参数 &quot;&quot;&quot;</span>
 
        <span class="token comment"># print self.name</span>
        <span class="token keyword">print</span> <span class="token string">'普通方法'</span>
 
    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">class_func</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot; 定义类方法, 至少有一个cls参数 &quot;&quot;&quot;</span>
 
        <span class="token keyword">print</span> <span class="token string">'类方法'</span>
 
    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">static_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot; 定义静态方法 , 无默认参数&quot;&quot;&quot;</span>
 
        <span class="token keyword">print</span> <span class="token string">'静态方法'</span>
 
<span class="token comment"># 调用普通方法</span>
f <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>ord_func<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment"># 调用类方法</span>
Foo<span class="token punctuation">.</span>class_func<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment"># 调用静态方法</span>
Foo<span class="token punctuation">.</span>static_func<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h4 id="方法的定义和使用"><a href="#方法的定义和使用" aria-hidden="true" class="header-anchor">#</a> 方法的定义和使用</h4> <p><a href="http://qiniu.dong4j.info/2019-07-02-61b24a93ac8b9c1eccb9f328f678b90c.jpg" target="_blank" rel="noopener noreferrer"><img src="http://qiniu.dong4j.info/2019-07-02-61b24a93ac8b9c1eccb9f328f678b90c.jpg" alt="ptyhonoo3"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>相同点</strong>: 对于所有的方法而言, 均属于类（非对象）中, 所以, 在内存中也只保存一份.</p> <p><strong>不同点</strong>: 方法调用者不同、调用方法时自动传入的参数不同.</p> <h3 id="属性"><a href="#属性" aria-hidden="true" class="header-anchor">#</a> 属性</h3> <p>如果你已经了解Python类中的方法, 那么属性就非常简单了, 因为Python中的属性其实是<strong>普通方法</strong>的变种.</p> <p>对于属性, 有以下三个知识点:</p> <ul><li>属性的基本使用</li> <li>属性的两种定义方式</li></ul> <h4 id="属性的基本使用"><a href="#属性的基本使用" aria-hidden="true" class="header-anchor">#</a> 属性的基本使用</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># ############### 定义 ###############</span>
<span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
 
    <span class="token comment"># 定义属性</span>
    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">prop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
<span class="token comment"># ############### 调用 ###############</span>
foo_obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
foo_obj<span class="token punctuation">.</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span>
foo_obj<span class="token punctuation">.</span>prop   <span class="token comment">#调用属性</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="属性的定义和使用"><a href="#属性的定义和使用" aria-hidden="true" class="header-anchor">#</a> 属性的定义和使用</h4> <p><a href="http://qiniu.dong4j.info/2019-07-02-1f36b5fd62f9bcd403151d169301e33b.png" target="_blank" rel="noopener noreferrer"><img src="http://qiniu.dong4j.info/2019-07-02-1f36b5fd62f9bcd403151d169301e33b.png" alt="ptyhonoo4"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>由属性的定义和调用要注意一下几点:</p> <ul><li>定义时, 在普通方法的基础上添加 <strong>@property</strong> 装饰器；</li> <li>定义时, 属性<strong>仅有一个</strong>self参数</li> <li>调用时, 无需<strong>括号</strong>
方法: foo_obj.func()
属性: foo_obj.prop</li></ul> <p>注意: 属性存在意义是: 访问属性时可以制造出和访问字段完全相同的假象</p> <p>属性由方法变种而来, 如果Python中没有属性, 方法完全可以代替其功能.</p> <p>实例: 对于主机列表页面, 每次请求不可能把数据库中的所有内容都显示到页面上, 而是通过分页的功能局部显示, 所以在向数据库中请求数据时就要显示的指定获取从第m条到第n条的所有数据（即: limit m,n）, 这个分页的功能包括:</p> <ul><li>根据用户请求的当前页和总数据条数计算出 m 和 n</li> <li>根据m 和 n 去数据库中请求数据</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># ############### 定义 ###############</span>
<span class="token keyword">class</span> <span class="token class-name">Pager</span><span class="token punctuation">:</span>
 
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> current_page<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 用户当前请求的页码（第一页、第二页...）</span>
        self<span class="token punctuation">.</span>current_page <span class="token operator">=</span> current_page
        <span class="token comment"># 每页默认显示10条数据</span>
        self<span class="token punctuation">.</span>per_items <span class="token operator">=</span> <span class="token number">10</span> 
 
    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">start</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        val <span class="token operator">=</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>per_items
        <span class="token keyword">return</span> val
 
    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">end</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        val <span class="token operator">=</span> self<span class="token punctuation">.</span>current_page <span class="token operator">*</span> self<span class="token punctuation">.</span>per_items
        <span class="token keyword">return</span> val
 
<span class="token comment"># ############### 调用 ###############</span>
 
p <span class="token operator">=</span> Pager<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span>start 就是起始值<span class="token punctuation">,</span> 即<span class="token punctuation">:</span> m
p<span class="token punctuation">.</span>end   就是结束值<span class="token punctuation">,</span> 即<span class="token punctuation">:</span> n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>从上述可见, Python的属性的功能是: 属性内部进行一系列的逻辑计算, 最终将计算结果返回.</p> <h4 id="属性的两种定义方式"><a href="#属性的两种定义方式" aria-hidden="true" class="header-anchor">#</a> 属性的两种定义方式</h4> <p>属性的定义有两种方式:</p> <ul><li>装饰器 即: 在方法上应用装饰器</li> <li>静态字段 即: 在类中定义值为property对象的静态字段</li></ul> <p><strong>装饰器方式: 在类的普通方法上应用@property装饰器</strong></p> <p>我们知道Python中的类有经典类和新式类, 新式类的属性比经典类的属性丰富. （ 如果类继object, 那么该类是新式类 ）
<strong>经典类</strong>, 具有一种@property装饰器（如上一步实例）</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># ############### 定义 ###############    </span>
<span class="token keyword">class</span> <span class="token class-name">Goods</span><span class="token punctuation">:</span>

    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">price</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;wupeiqi&quot;</span>
<span class="token comment"># ############### 调用 ###############</span>
obj <span class="token operator">=</span> Goods<span class="token punctuation">(</span><span class="token punctuation">)</span>
result <span class="token operator">=</span> obj<span class="token punctuation">.</span>price  <span class="token comment"># 自动执行 @property 修饰的 price 方法, 并获取方法的返回值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>新式类</strong>, 具有三种@property装饰器</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># ############### 定义 ###############</span>
<span class="token keyword">class</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">price</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'@property'</span>

    <span class="token decorator annotation punctuation">@price<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">price</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'@price.setter'</span>

    <span class="token decorator annotation punctuation">@price<span class="token punctuation">.</span>deleter</span>
    <span class="token keyword">def</span> <span class="token function">price</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'@price.deleter'</span>

<span class="token comment"># ############### 调用 ###############</span>
obj <span class="token operator">=</span> Goods<span class="token punctuation">(</span><span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>price          <span class="token comment"># 自动执行 @property 修饰的 price 方法, 并获取方法的返回值</span>

obj<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">123</span>    <span class="token comment"># 自动执行 @price.setter 修饰的 price 方法, 并将  123 赋值给方法的参数</span>

<span class="token keyword">del</span> obj<span class="token punctuation">.</span>price      <span class="token comment"># 自动执行 @price.deleter 修饰的 price 方法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><blockquote><p>注: 经典类中的属性只有一种访问方式, 其对应被 @property 修饰的方法
新式类中的属性有三种访问方式, 并分别对应了三个被@property、@方法名.setter、@方法名.deleter修饰的方法</p> <p>由于新式类中具有三种访问方式, 我们可以根据他们几个属性的访问特点, 分别将三个方法定义为对同一个属性: 获取、修改、删除</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 原价</span>
        self<span class="token punctuation">.</span>original_price <span class="token operator">=</span> <span class="token number">100</span>
        <span class="token comment"># 折扣</span>
        self<span class="token punctuation">.</span>discount <span class="token operator">=</span> <span class="token number">0.8</span>

    @<span class="token builtin">property</span>
    <span class="token keyword">def</span> <span class="token function">price</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 实际价格 = 原价 * 折扣</span>
        new_price <span class="token operator">=</span> self<span class="token punctuation">.</span>original_price <span class="token operator">*</span> self<span class="token punctuation">.</span>discount
        <span class="token keyword">return</span> new_price

    @price<span class="token punctuation">.</span>setter
    <span class="token keyword">def</span> <span class="token function">price</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>original_price <span class="token operator">=</span> value

    @price<span class="token punctuation">.</span>deltter
    <span class="token keyword">def</span> <span class="token function">price</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">del</span> self<span class="token punctuation">.</span>original_price

obj <span class="token operator">=</span> Goods<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>price         <span class="token comment"># 获取商品价格</span>
obj<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">200</span>   <span class="token comment"># 修改商品原价</span>
<span class="token keyword">del</span> obj<span class="token punctuation">.</span>price     <span class="token comment"># 删除商品原价</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>实例</p> <p><strong>静态字段方式, 创建值为property对象的静态字段</strong></p> <p>当使用静态字段的方式创建属性时, 经典类和新式类无区别</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">get_bar</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'wupeiqi'</span>

    BAR <span class="token operator">=</span> <span class="token builtin">property</span><span class="token punctuation">(</span>get_bar<span class="token punctuation">)</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
reuslt <span class="token operator">=</span> obj<span class="token punctuation">.</span>BAR        <span class="token comment"># 自动调用get_bar方法, 并获取方法的返回值</span>
<span class="token keyword">print</span> reuslt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>property的构造方法中有个四个参数</p> <ul><li>第一个参数是<strong>方法名</strong>, 调用 <code>对象.属性</code> 时自动触发执行方法</li> <li>第二个参数是<strong>方法名</strong>, 调用 <code>对象.属性 ＝ XXX</code> 时自动触发执行方法</li> <li>第三个参数是<strong>方法名</strong>, 调用 <code>del 对象.属性</code> 时自动触发执行方法</li> <li>第四个参数是<strong>字符串</strong>, 调用 <code>对象.属性.__doc__</code> , 此参数是该属性的描述信息</li></ul></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span> 

    <span class="token keyword">def</span> <span class="token function">get_bar</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'wupeiqi'</span>

    <span class="token comment"># *必须两个参数</span>
    <span class="token keyword">def</span> <span class="token function">set_bar</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span> 
        <span class="token keyword">return</span> <span class="token keyword">return</span> <span class="token string">'set value'</span> <span class="token operator">+</span> value

    <span class="token keyword">def</span> <span class="token function">del_bar</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'wupeiqi'</span>

    BAR ＝ <span class="token builtin">property</span><span class="token punctuation">(</span>get_bar<span class="token punctuation">,</span> set_bar<span class="token punctuation">,</span> del_bar<span class="token punctuation">,</span> <span class="token string">'description...'</span><span class="token punctuation">)</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>BAR              <span class="token comment"># 自动调用第一个参数中定义的方法: get_bar</span>
obj<span class="token punctuation">.</span>BAR <span class="token operator">=</span> <span class="token string">&quot;alex&quot;</span>     <span class="token comment"># 自动调用第二个参数中定义的方法: set_bar方法, 并将“alex”当作参数传入</span>
<span class="token keyword">del</span> Foo<span class="token punctuation">.</span>BAR          <span class="token comment"># 自动调用第三个参数中定义的方法: del_bar方法</span>
obj<span class="token punctuation">.</span>BAE<span class="token punctuation">.</span>__doc__      <span class="token comment"># 自动获取第四个参数中设置的值: description...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p>由于静态字段方式创建属性具有三种访问方式, 我们可以根据他们几个属性的访问特点, 分别将三个方法定义为对同一个属性: 获取、修改、删除</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 原价</span>
        self<span class="token punctuation">.</span>original_price <span class="token operator">=</span> <span class="token number">100</span>
        <span class="token comment"># 折扣</span>
        self<span class="token punctuation">.</span>discount <span class="token operator">=</span> <span class="token number">0.8</span>

    <span class="token keyword">def</span> <span class="token function">get_price</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 实际价格 = 原价 * 折扣</span>
        new_price <span class="token operator">=</span> self<span class="token punctuation">.</span>original_price <span class="token operator">*</span> self<span class="token punctuation">.</span>discount
        <span class="token keyword">return</span> new_price

    <span class="token keyword">def</span> <span class="token function">set_price</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>original_price <span class="token operator">=</span> value

    <span class="token keyword">def</span> <span class="token function">del_price</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">del</span> self<span class="token punctuation">.</span>original_price

    PRICE <span class="token operator">=</span> <span class="token builtin">property</span><span class="token punctuation">(</span>get_price<span class="token punctuation">,</span> set_price<span class="token punctuation">,</span> del_price<span class="token punctuation">,</span> <span class="token string">'价格属性描述...'</span><span class="token punctuation">)</span>

obj <span class="token operator">=</span> Goods<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>PRICE         <span class="token comment"># 获取商品价格</span>
obj<span class="token punctuation">.</span>PRICE <span class="token operator">=</span> <span class="token number">200</span>   <span class="token comment"># 修改商品原价</span>
<span class="token keyword">del</span> obj<span class="token punctuation">.</span>PRICE     <span class="token comment"># 删除商品原价</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><blockquote><p>实例</p></blockquote> <blockquote><p>注意: Python WEB框架 Django 的视图中 request.POST 就是使用的静态字段的方式创建的属性</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">WSGIRequest</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>HttpRequest<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> environ<span class="token punctuation">)</span><span class="token punctuation">:</span>
   script_name <span class="token operator">=</span> get_script_name<span class="token punctuation">(</span>environ<span class="token punctuation">)</span>
   path_info <span class="token operator">=</span> get_path_info<span class="token punctuation">(</span>environ<span class="token punctuation">)</span>
   <span class="token keyword">if</span> <span class="token keyword">not</span> path_info<span class="token punctuation">:</span>
       <span class="token comment"># Sometimes PATH_INFO exists, but is empty (e.g. accessing</span>
       <span class="token comment"># the SCRIPT_NAME URL without a trailing slash). We really need to</span>
       <span class="token comment"># operate as if they'd requested '/'. Not amazingly nice to force</span>
       <span class="token comment"># the path like this, but should be harmless.</span>
       path_info <span class="token operator">=</span> <span class="token string">'/'</span>
   self<span class="token punctuation">.</span>environ <span class="token operator">=</span> environ
   self<span class="token punctuation">.</span>path_info <span class="token operator">=</span> path_info
   self<span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token string">'%s/%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>script_name<span class="token punctuation">.</span>rstrip<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path_info<span class="token punctuation">.</span>lstrip<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   self<span class="token punctuation">.</span>META <span class="token operator">=</span> environ
   self<span class="token punctuation">.</span>META<span class="token punctuation">[</span><span class="token string">'PATH_INFO'</span><span class="token punctuation">]</span> <span class="token operator">=</span> path_info
   self<span class="token punctuation">.</span>META<span class="token punctuation">[</span><span class="token string">'SCRIPT_NAME'</span><span class="token punctuation">]</span> <span class="token operator">=</span> script_name
   self<span class="token punctuation">.</span>method <span class="token operator">=</span> environ<span class="token punctuation">[</span><span class="token string">'REQUEST_METHOD'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>
   _<span class="token punctuation">,</span> content_params <span class="token operator">=</span> cgi<span class="token punctuation">.</span>parse_header<span class="token punctuation">(</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CONTENT_TYPE'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token keyword">if</span> <span class="token string">'charset'</span> <span class="token keyword">in</span> content_params<span class="token punctuation">:</span>
       <span class="token keyword">try</span><span class="token punctuation">:</span>
           codecs<span class="token punctuation">.</span>lookup<span class="token punctuation">(</span>content_params<span class="token punctuation">[</span><span class="token string">'charset'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
       <span class="token keyword">except</span> LookupError<span class="token punctuation">:</span>
           <span class="token keyword">pass</span>
       <span class="token keyword">else</span><span class="token punctuation">:</span>
           self<span class="token punctuation">.</span>encoding <span class="token operator">=</span> content_params<span class="token punctuation">[</span><span class="token string">'charset'</span><span class="token punctuation">]</span>
   self<span class="token punctuation">.</span>_post_parse_error <span class="token operator">=</span> <span class="token boolean">False</span>
   <span class="token keyword">try</span><span class="token punctuation">:</span>
       content_length <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CONTENT_LENGTH'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token keyword">except</span> <span class="token punctuation">(</span>ValueError<span class="token punctuation">,</span> TypeError<span class="token punctuation">)</span><span class="token punctuation">:</span>
       content_length <span class="token operator">=</span> <span class="token number">0</span>
   self<span class="token punctuation">.</span>_stream <span class="token operator">=</span> LimitedStream<span class="token punctuation">(</span>self<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'wsgi.input'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> content_length<span class="token punctuation">)</span>
   self<span class="token punctuation">.</span>_read_started <span class="token operator">=</span> <span class="token boolean">False</span>
   self<span class="token punctuation">.</span>resolver_match <span class="token operator">=</span> <span class="token boolean">None</span>

<span class="token keyword">def</span> <span class="token function">_get_scheme</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token keyword">return</span> self<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'wsgi.url_scheme'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">_get_request</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
   warnings<span class="token punctuation">.</span>warn<span class="token punctuation">(</span><span class="token string">'`request.REQUEST` is deprecated, use `request.GET` or '</span>
                 <span class="token string">'`request.POST` instead.'</span><span class="token punctuation">,</span> RemovedInDjango19Warning<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
   <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_request'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
       self<span class="token punctuation">.</span>_request <span class="token operator">=</span> datastructures<span class="token punctuation">.</span>MergeDict<span class="token punctuation">(</span>self<span class="token punctuation">.</span>POST<span class="token punctuation">,</span> self<span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
   <span class="token keyword">return</span> self<span class="token punctuation">.</span>_request

@cached_property
<span class="token keyword">def</span> <span class="token function">GET</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token comment"># The WSGI spec says 'QUERY_STRING' may be absent.</span>
   raw_query_string <span class="token operator">=</span> get_bytes_from_wsgi<span class="token punctuation">(</span>self<span class="token punctuation">.</span>environ<span class="token punctuation">,</span> <span class="token string">'QUERY_STRING'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span> http<span class="token punctuation">.</span>QueryDict<span class="token punctuation">(</span>raw_query_string<span class="token punctuation">,</span> encoding<span class="token operator">=</span>self<span class="token punctuation">.</span>_encoding<span class="token punctuation">)</span>

<span class="token comment"># ############### 看这里看这里  ###############</span>
<span class="token keyword">def</span> <span class="token function">_get_post</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_post'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
       self<span class="token punctuation">.</span>_load_post_and_files<span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span> self<span class="token punctuation">.</span>_post

<span class="token comment"># ############### 看这里看这里  ###############</span>
<span class="token keyword">def</span> <span class="token function">_set_post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> post<span class="token punctuation">)</span><span class="token punctuation">:</span>
   self<span class="token punctuation">.</span>_post <span class="token operator">=</span> post

@cached_property
<span class="token keyword">def</span> <span class="token function">COOKIES</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
   raw_cookie <span class="token operator">=</span> get_str_from_wsgi<span class="token punctuation">(</span>self<span class="token punctuation">.</span>environ<span class="token punctuation">,</span> <span class="token string">'HTTP_COOKIE'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span> http<span class="token punctuation">.</span>parse_cookie<span class="token punctuation">(</span>raw_cookie<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">_get_files</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'_files'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
       self<span class="token punctuation">.</span>_load_post_and_files<span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">return</span> self<span class="token punctuation">.</span>_files

<span class="token comment"># ############### 看这里看这里  ###############</span>
POST <span class="token operator">=</span> <span class="token builtin">property</span><span class="token punctuation">(</span>_get_post<span class="token punctuation">,</span> _set_post<span class="token punctuation">)</span>

FILES <span class="token operator">=</span> <span class="token builtin">property</span><span class="token punctuation">(</span>_get_files<span class="token punctuation">)</span>
REQUEST <span class="token operator">=</span> <span class="token builtin">property</span><span class="token punctuation">(</span>_get_request<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><blockquote><p>Django源码</p></blockquote> <p>所以, 定义属性共有两种方式, 分别是【装饰器】和【静态字段】, 而【装饰器】方式针对经典类和新式类又有所不同.</p> <h3 id="类成员的修饰符"><a href="#类成员的修饰符" aria-hidden="true" class="header-anchor">#</a> 类成员的修饰符</h3> <p>类的所有成员在上一步骤中已经做了详细的介绍, 对于每一个类的成员而言都有两种形式:</p> <ul><li>公有成员, 在任何地方都能访问</li> <li>私有成员, 只有在类的内部才能方法</li></ul> <p><strong>私有成员和公有成员的定义不同</strong>: 私有成员命名时, 前两个字符是下划线. （特殊成员除外, 例如: <strong>init</strong>、<strong>call</strong>、__dict__等）</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">:</span>

	<span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'公有字段'</span>
		self<span class="token punctuation">.</span>__foo <span class="token operator">=</span> <span class="token string">&quot;私有字段&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>私有成员和公有成员的访问限制不同</strong>:</p> <h4 id="静态字段"><a href="#静态字段" aria-hidden="true" class="header-anchor">#</a> 静态字段</h4> <ul><li>公有静态字段: 类可以访问；类内部可以访问；派生类中可以访问</li> <li>私有静态字段: 仅类内部可以访问；</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">:</span>

    name <span class="token operator">=</span> <span class="token string">&quot;公有静态字段&quot;</span>

    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> C<span class="token punctuation">.</span>name

<span class="token keyword">class</span> <span class="token class-name">D</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">show</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> C<span class="token punctuation">.</span>name

C<span class="token punctuation">.</span>name         <span class="token comment"># 类访问</span>

obj <span class="token operator">=</span> C<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment"># 类内部可以访问</span>

obj_son <span class="token operator">=</span> D<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj_son<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 派生类中可以访问</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="公有静态字段"><a href="#公有静态字段" aria-hidden="true" class="header-anchor">#</a> 公有静态字段</h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">:</span>

    __name <span class="token operator">=</span> <span class="token string">&quot;公有静态字段&quot;</span>

    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> C<span class="token punctuation">.</span>__name

<span class="token keyword">class</span> <span class="token class-name">D</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">show</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> C<span class="token punctuation">.</span>__name

C<span class="token punctuation">.</span>__name       <span class="token comment"># 类访问            错误</span>

obj <span class="token operator">=</span> C<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment"># 类内部可以访问    正确</span>

obj_son <span class="token operator">=</span> D<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj_son<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 派生类中可以访问   错误</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="私有静态字段"><a href="#私有静态字段" aria-hidden="true" class="header-anchor">#</a> 私有静态字段</h5> <h4 id="普通字段"><a href="#普通字段" aria-hidden="true" class="header-anchor">#</a> 普通字段</h4> <ul><li>公有普通字段: 对象可以访问；类内部可以访问；派生类中可以访问</li> <li>私有普通字段: 仅类内部可以访问；</li></ul> <p>ps: 如果想要强制访问私有字段, 可以通过 【对象._类名__私有字段明 】访问（如: obj._C__foo）, 不建议强制访问私有成员.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">&quot;公有字段&quot;</span>

    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> self<span class="token punctuation">.</span>foo 　<span class="token comment">#　类内部访问</span>

<span class="token keyword">class</span> <span class="token class-name">D</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">show</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> self<span class="token punctuation">.</span>foo　＃　派生类中访问

obj <span class="token operator">=</span> C<span class="token punctuation">(</span><span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>foo     <span class="token comment"># 通过对象访问</span>
obj<span class="token punctuation">.</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 类内部访问</span>

obj_son <span class="token operator">=</span> D<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj_son<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 派生类中访问</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="公有字段"><a href="#公有字段" aria-hidden="true" class="header-anchor">#</a> 公有字段</h5> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__foo <span class="token operator">=</span> <span class="token string">&quot;私有字段&quot;</span>

    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> self<span class="token punctuation">.</span>foo 　<span class="token comment">#　类内部访问</span>

<span class="token keyword">class</span> <span class="token class-name">D</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">show</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> self<span class="token punctuation">.</span>foo　＃　派生类中访问

obj <span class="token operator">=</span> C<span class="token punctuation">(</span><span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>__foo     <span class="token comment"># 通过对象访问    错误</span>
obj<span class="token punctuation">.</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 类内部访问        正确</span>

obj_son <span class="token operator">=</span> D<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj_son<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 派生类中访问  错误</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="私有字段"><a href="#私有字段" aria-hidden="true" class="header-anchor">#</a> 私有字段</h5> <p>方法、属性的访问于上述方式相似, 即: 私有成员只能在类内部使用</p> <p><em>ps: 非要访问私有属性的话, 可以通过 对象._类__属性名</em></p> <h3 id="类的特殊成员"><a href="#类的特殊成员" aria-hidden="true" class="header-anchor">#</a> 类的特殊成员</h3> <p>上文介绍了Python的类成员以及成员修饰符, 从而了解到类中有字段、方法和属性三大类成员, 并且成员名前如果有两个下划线, 则表示该成员是私有成员, 私有成员只能由类内部调用. 无论人或事物往往都有不按套路出牌的情况, Python的类成员也是如此, 存在着一些具有特殊含义的成员, 详情如下:</p> <h4 id="doc"><a href="#doc" aria-hidden="true" class="header-anchor">#</a> . <strong>doc</strong></h4> <p>表示类的描述信息</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot; 描述类信息, 这是用于看片的神奇 &quot;&quot;&quot;</span>

    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

<span class="token keyword">print</span> Foo<span class="token punctuation">.</span>__doc__
<span class="token comment">#输出: 类的描述信息</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="module-和-class"><a href="#module-和-class" aria-hidden="true" class="header-anchor">#</a> . <strong>module</strong> 和  <strong>class</strong></h4> <p><strong>module</strong> 表示当前操作的对象在那个模块</p> <p><strong>class</strong>     表示当前操作的对象的类是什么</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'wupeiqi'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>lib/aa.py</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> lib<span class="token punctuation">.</span>aa <span class="token keyword">import</span> C

obj <span class="token operator">=</span> C<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> obj<span class="token punctuation">.</span>__module__  <span class="token comment"># 输出 lib.aa, 即: 输出模块</span>
<span class="token keyword">print</span> obj<span class="token punctuation">.</span>__class__      <span class="token comment"># 输出 lib.aa.C, 即: 输出类</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>index.py</p> <h4 id="init"><a href="#init" aria-hidden="true" class="header-anchor">#</a> . <strong>init</strong></h4> <p>构造方法, 通过类创建对象时, 自动触发执行.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token string">'wupeiqi'</span><span class="token punctuation">)</span> <span class="token comment"># 自动执行类中的 __init__ 方法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="del"><a href="#del" aria-hidden="true" class="header-anchor">#</a> . <strong>del</strong></h4> <p>析构方法, 当对象在内存中被释放时, 自动触发执行.</p> <p>注: 此方法一般无须定义, 因为Python是一门高级语言, 程序员在使用时无需关心内存的分配和释放, 因为此工作都是交给Python解释器来执行, 所以, 析构函数的调用是由解释器在进行垃圾回收时自动触发执行的.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="call"><a href="#call" aria-hidden="true" class="header-anchor">#</a> . <strong>call</strong></h4> <p>对象后面加括号, 触发执行.</p> <p>注: 构造方法的执行是由创建对象触发的, 即: 对象 = 类名() ；而对于 <strong>call</strong> 方法的执行是由对象后加括号触发的, 即: 对象() 或者 类()()</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token keyword">print</span> <span class="token string">'__call__'</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 执行 __init__</span>
obj<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># 执行 __call__</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="dict"><a href="#dict" aria-hidden="true" class="header-anchor">#</a> . <strong>dict</strong></h4> <p>类或对象中的所有成员</p> <p>上文中我们知道: 类的普通字段属于对象；类中的静态字段和方法等属于类, 即:</p> <p><a href="http://qiniu.dong4j.info/2019-07-02-339dd83636f2f2f79432156c10f9ff6d.jpg" target="_blank" rel="noopener noreferrer"><img src="http://qiniu.dong4j.info/2019-07-02-339dd83636f2f2f79432156c10f9ff6d.jpg" alt="ptyhonoo5"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Province</span><span class="token punctuation">:</span>

    country <span class="token operator">=</span> <span class="token string">'China'</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>count <span class="token operator">=</span> count

    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'func'</span>

<span class="token comment"># 获取类的成员, 即: 静态字段、方法、</span>
<span class="token keyword">print</span> Province<span class="token punctuation">.</span>__dict__
<span class="token comment"># 输出: {'country': 'China', '__module__': '__main__', 'func': , '__init__': , '__doc__': None}</span>

obj1 <span class="token operator">=</span> Province<span class="token punctuation">(</span><span class="token string">'HeBei'</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> obj1<span class="token punctuation">.</span>__dict__
<span class="token comment"># 获取 对象obj1 的成员</span>
<span class="token comment"># 输出: {'count': 10000, 'name': 'HeBei'}</span>

obj2 <span class="token operator">=</span> Province<span class="token punctuation">(</span><span class="token string">'HeNan'</span><span class="token punctuation">,</span> <span class="token number">3888</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> obj2<span class="token punctuation">.</span>__dict__
<span class="token comment"># 获取 对象obj1 的成员</span>
<span class="token comment"># 输出: {'count': 3888, 'name': 'HeNan'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="str"><a href="#str" aria-hidden="true" class="header-anchor">#</a> . <strong>str</strong></h4> <p>如果一个类中定义了__str__方法, 那么在打印 对象 时, 默认输出该方法的返回值.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'wupeiqi'</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> obj
<span class="token comment"># 输出: wupeiqi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="getitem-setitem-delitem"><a href="#getitem-setitem-delitem" aria-hidden="true" class="header-anchor">#</a> <strong>getitem</strong> <strong>setitem</strong> <strong>delitem</strong></h4> <p>用于索引操作, 如字典. 以上分别表示获取、设置、删除数据</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'__getitem__'</span><span class="token punctuation">,</span>key

    <span class="token keyword">def</span> <span class="token function">__setitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'__setitem__'</span><span class="token punctuation">,</span>key<span class="token punctuation">,</span>value

    <span class="token keyword">def</span> <span class="token function">__delitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'__delitem__'</span><span class="token punctuation">,</span>key

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>

result <span class="token operator">=</span> obj<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span>      <span class="token comment"># 自动触发执行 __getitem__</span>
obj<span class="token punctuation">[</span><span class="token string">'k2'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'wupeiqi'</span>   <span class="token comment"># 自动触发执行 __setitem__</span>
<span class="token keyword">del</span> obj<span class="token punctuation">[</span><span class="token string">'k1'</span><span class="token punctuation">]</span>           <span class="token comment"># 自动触发执行 __delitem__</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="getslice-setslice-delslice"><a href="#getslice-setslice-delslice" aria-hidden="true" class="header-anchor">#</a> <strong>getslice</strong> <strong>setslice</strong> <strong>delslice</strong></h4> <p>该三个方法用于分片操作, 如: 列表</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__getslice__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'__getslice__'</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>j

    <span class="token keyword">def</span> <span class="token function">__setslice__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> sequence<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'__setslice__'</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>j

    <span class="token keyword">def</span> <span class="token function">__delslice__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'__delslice__'</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>j

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>

obj<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span>                   <span class="token comment"># 自动触发执行 __getslice__</span>
obj<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">]</span>    <span class="token comment"># 自动触发执行 __setslice__</span>
<span class="token keyword">del</span> obj<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>                <span class="token comment"># 自动触发执行 __delslice__</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="iter"><a href="#iter" aria-hidden="true" class="header-anchor">#</a> . <strong>iter</strong></h4> <p>用于迭代器, 之所以列表、字典、元组可以进行for循环, 是因为类型内部定义了 <strong>iter</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> obj<span class="token punctuation">:</span>
    <span class="token keyword">print</span> i

<span class="token comment"># 报错: TypeError: 'Foo' object is not iterable</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>第一步</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> obj<span class="token punctuation">:</span>
    <span class="token keyword">print</span> i

<span class="token comment"># 报错: TypeError: iter() returned non-iterator of type 'NoneType'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>第二步</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sq<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>sq <span class="token operator">=</span> sq

    <span class="token keyword">def</span> <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>sq<span class="token punctuation">)</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> obj<span class="token punctuation">:</span>
    <span class="token keyword">print</span> i
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>第三步</p> <p>以上步骤可以看出, for循环迭代的其实是  iter([11,22,33,44]) , 所以执行流程可以变更为:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

obj <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> obj<span class="token punctuation">:</span>
    <span class="token keyword">print</span> i
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># -*- coding:utf-8 -*-</span>

obj <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    val <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token builtin">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span> val
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>For循环语法内部</p> <h4 id="new-和-metaclass"><a href="#new-和-metaclass" aria-hidden="true" class="header-anchor">#</a> . <strong>new</strong> 和 <strong>metaclass</strong></h4> <p>阅读以下代码:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># obj是通过Foo类实例化的对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上述代码中, obj 是通过 Foo 类实例化的对象, 其实, 不仅 obj 是一个对象, Foo类本身也是一个对象, 因为在<strong>Python中一切事物都是对象</strong>.</p> <p>如果按照一切事物都是对象的理论: obj对象是通过执行Foo类的构造方法创建, 那么Foo类对象应该也是通过执行某个类的 构造方法 创建.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">print</span> <span class="token builtin">type</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment"># 输出:      表示, obj 对象由Foo类创建</span>
<span class="token keyword">print</span> <span class="token builtin">type</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span> <span class="token comment"># 输出:               表示, Foo类对象由 type 类创建</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>所以, <strong>obj对象是Foo类的一个实例</strong>, <strong>Foo类对象是 type 类的一个实例</strong>, 即: Foo类对象 是通过type类的构造方法创建.</p> <h2 id="创建类就可以有两种方式"><a href="#创建类就可以有两种方式" aria-hidden="true" class="header-anchor">#</a> 创建类就可以有两种方式</h2> <h3 id="普通方式"><a href="#普通方式" aria-hidden="true" class="header-anchor">#</a> 普通方式</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span> <span class="token string">'hello wupeiqi'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="特殊方式（type类的构造函数）"><a href="#特殊方式（type类的构造函数）" aria-hidden="true" class="header-anchor">#</a> 特殊方式（type类的构造函数）</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token string">'hello wupeiqi'</span>

Foo <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token string">'Foo'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'func'</span><span class="token punctuation">:</span> func<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#type第一个参数: 类名</span>
<span class="token comment">#type第二个参数: 当前类的基类</span>
<span class="token comment">#type第三个参数: 类的成员</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>＝＝》 类 是由 type 类实例化产生</p> <p>那么问题来了, 类默认是由 type 类实例化产生, type类中如何实现的创建类？类又是如何创建对象？</p> <p>答: 类中有一个属性 <strong>metaclass</strong>, 其用来表示该类由 谁 来实例化创建, 所以, 我们可以为 <strong>metaclass</strong> 设置一个type类的派生类, 从而查看 类 创建的过程.</p> <p><a href="http://qiniu.dong4j.info/2019-07-02-90b6ed54080461bcafdd0fc0b21abbf0.png" target="_blank" rel="noopener noreferrer"><img src="http://qiniu.dong4j.info/2019-07-02-90b6ed54080461bcafdd0fc0b21abbf0.png" alt="ptyhonoo6"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyType</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> what<span class="token punctuation">,</span> bases<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>MyType<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>what<span class="token punctuation">,</span> bases<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        obj <span class="token operator">=</span> self<span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    __metaclass__ <span class="token operator">=</span> MyType

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name

    <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">object</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>

<span class="token comment"># 第一阶段: 解释器从上到下执行代码创建Foo类</span>
<span class="token comment"># 第二阶段: 通过Foo类创建obj对象</span>
obj <span class="token operator">=</span> Foo<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/3/2019, 6:17:56 PM</span></div></footer> <!----> </main> <div class="valine-wrapper" data-v-0162251c><div id="valine" data-v-0162251c></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-d0bfeaa4 data-v-d0bfeaa4><i class="iconfont reco-up" data-v-d0bfeaa4></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.23d4d300.js" defer></script><script src="/assets/js/4.28fd9624.js" defer></script><script src="/assets/js/1.928d15b1.js" defer></script><script src="/assets/js/82.e98222ae.js" defer></script>
  </body>
</html>
